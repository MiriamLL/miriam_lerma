[
  {
    "path": "posts/2022-06-30-time-formats/",
    "title": "Time formats",
    "description": "How to convert your time to a format that R can understand as time.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-06-30",
    "categories": [
      "R",
      "tracking",
      "English"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nData ğŸ“–\r\nTransform the column to\r\nPOSIXct\r\n\r\nCorrect time ğŸŒ\r\nIdentify your time zone\r\nğŸ—ºï¸\r\n\r\nOther resources ğŸ‘©ğŸ½â€ğŸ«\r\n\r\nIntro\r\nThis post is about how to convert date and time to a format that R\r\ncan understand it. \r\nFor example if you wrote the date and time during fieldwork in a\r\nnotebook, and then wrote it down in a spreadsheet at your computer. When\r\nyou load your this spreadsheet into R, very often R would think that\r\nyour date and time is text. Therefore, you need to change the â€˜classâ€™ of\r\nthe column where you have date and time.\r\nIt is important to change the â€˜classâ€™ of your column, so you\r\ncan:\r\n- Correct the time zone  - Calculate duration of events (for example\r\nforaging trip duration) - Count days (for example Julian days) -\r\nIdentify night and day periods â€¦ and many many more\r\nIn this post we will transform the class of our\r\ncolumn date and time from character or other class,\r\ninto POSTIXct. Additionally, we will change the\r\ntime zone.\r\nData ğŸ“–\r\nTo do this exercise, load data from the package â€˜sulaâ€™.  For\r\naccessing the data, you need to have the package installed.\r\nTo install:\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\n\r\n\r\n\r\n\r\nlibrary(sula)\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nGPS_raw<-(GPS_raw)\r\n\r\n\r\nDate ğŸ“…\r\nThe data frame contains a column with date\r\ninformation.\r\n\r\n\r\nhead(GPS_raw$DateGMT)\r\n\r\n[1] \"02/11/2017\" \"02/11/2017\" \"02/11/2017\" \"02/11/2017\" \"02/11/2017\"\r\n[6] \"02/11/2017\"\r\n\r\nThe date infomation is of class\r\ncharacter.\r\n\r\n\r\nclass(GPS_raw$DateGMT)\r\n\r\n[1] \"character\"\r\n\r\nTime â°\r\nThe data frame contains a column with time\r\ninformation.\r\n\r\n\r\nhead(GPS_raw$TimeGMT)\r\n\r\n[1] \"17:05:30\" \"17:09:35\" \"17:13:50\" \"17:17:59\" \"17:22:13\" \"17:26:25\"\r\n\r\nThe time infomation is of class\r\ncharacter.\r\n\r\n\r\nclass(GPS_raw$TimeGMT)\r\n\r\n[1] \"character\"\r\n\r\nTransform the column to\r\nPOSIXct\r\nPOSIX comes from Portable Operating System\r\nInterface and the X from UNIX.  There are two\r\nsubclasses ct from calendar time and\r\nlt from local time. See R\r\nnews. Calendar time being the number of seconds since the\r\nbeginning of 1970.\r\n To create our column with date and time, lets merge the column\r\nDateGMT and TimeGMT from our data frame into one column DateTime.\r\n\r\n\r\nGPS_raw$DateTime<-paste(GPS_raw$DateGMT,GPS_raw$TimeGMT)\r\n\r\n\r\nThen convert it to POSIXct\r\n\r\n\r\nGPS_raw$DateTime<-as.POSIXct(strptime(GPS_raw$DateTime, format = \"%d/%m/%Y %H:%M:%S\"))\r\n\r\n\r\nArguments used:\r\nstrptime is a function to convert characters to time\r\nobjects, where str stands for string, p from\r\nparse, and time is self explanatory.\r\nThen we provide the information of the format we were using, be\r\nspecially careful with the format of your date and time.\r\nFor the example, I used %d/%m/%Y %H:%M:%S\r\nDAY%d - is used for day and goes from 0 to 31%a - is used for the day of the week using the first\r\nthree letters of the name%A - is used for the day\r\nof the week using the full nameMONTH%m - is used for month it goes from 0 to 12%b - is used for the name of the month using the first\r\nthree letters of the name%B - is used for the name\r\nof the month using the full nameYEAR%y - is used for year using two digits%Y - is used for year using four difits\r\nHOURS%H - is used for hours and goes from 0 to 24MINUTES%M is used for minutes and goes from 0 to 60SECONDS%S is used for seconds and goes from 0 to 60\r\nIt is also important to note if you are using slash\r\n(/), dash (-) or any other, and do not\r\nforget the colon (:) when separating the times\r\nNote for excel-users: if you open your file first in\r\nexcel, excel tries to identify the class, and might have transform the\r\ncolumn. Therefore you might need to use one of the examples from stackoverflow\r\nCheck\r\nMany struggles come from the format. If the format you are giving\r\ndoesnt corresponds to the format of your column, it would generate you\r\nNAs.\r\nTherefore, I recommend to create a column to make the trials on the\r\nformat and to always check that you have the correct\r\ntransformations.\r\nHere is an example for checking:\r\n\r\n\r\nrange(GPS_raw$DateTime)\r\n\r\n[1] \"2017-11-02 17:05:30 CET\" \"2017-11-27 09:48:57 CET\"\r\n\r\nNote that in this example it returns the word CET.\r\nThis is because I am in the Central\r\nEuropean Time.\r\nThis might be correct and all good, but it is useful to know that you\r\ncan transform it to you time zone.\r\nCorrect time ğŸŒ\r\nOne way to directly have the format in our time zone, is to specify\r\nthe time zone when converting the class.\r\nHere, I am adding the â€œGMTâ€ at the end.\r\n\r\n\r\nGPS_raw$GMT<-as.POSIXct(strptime(GPS_raw$DateTime, format = \"%Y-%m-%d %H:%M:%S\"),\"GMT\")\r\n\r\n\r\nAnd now shows GMT.\r\n\r\n\r\nrange(GPS_raw$GMT)\r\n\r\n[1] \"2017-11-02 17:05:30 GMT\" \"2017-11-27 09:48:57 GMT\"\r\n\r\nIdentify your time zone ğŸ—ºï¸\r\nAccording to where your study was made, you might need to change the\r\ntime to your time zone tz\r\nThere are many ways to identify your tz:\r\nYou can click on your area on this map\r\nYou can check the list of name in R using the code\r\nOlsonNames()\r\nYou can check lists like those of wikipedia\r\nIn case you are here because you are interested in analyzing tracking\r\ndata, note that itâ€™s common that the GPS record data in GMT+0.\r\n\r\n\r\n\r\nlubridate\r\nOne option to change your date and time to your time zone is using\r\nthe package lubridate\r\n\r\n\r\nlibrary(lubridate)\r\n\r\n\r\nExample with the data.\r\n\r\n\r\nGPS_tz<-GPS_raw\r\n\r\n\r\nMy original tz:\r\n\r\n\r\nGPS_tz$CET<-ymd_hms(GPS_tz$DateTime, tz = \"Europe/Amsterdam\")\r\n\r\n\r\nMy goal tz:\r\n\r\n\r\nGPS_tz$UTC_4<- with_tz(GPS_tz$CET,tzone = \"America/La_Paz\")\r\n\r\n\r\nManually\r\nIf you know the time difference between the recording and the region\r\nwhere you are, you can also calculate it manually.\r\nFor example:\r\n\r\n\r\nGPS_tz$five_hours_difference <- GPS_tz$CET - 3600*5\r\n\r\n\r\nThats it!\r\nHopefully this would help you.\r\nRecommendations\r\nBe very careful with the format and your time zone.\r\nI would recommend that you always create an extra column in your data\r\nframe to make the transformations, not your original column because if\r\nit returns NAs you will have to load the data frame over and over.\r\nIt takes time to get use to this transformations and there are many\r\ndifferent ways to transform times and date, so if you are struggling,\r\nyou are not the only one, just give it some time.\r\nOther resources ğŸ‘©ğŸ½â€ğŸ«\r\nThis post in Spanish\r\nMore options to use Date and Times in R also in Spanish\r\nTime zones\r\nmap\r\nList\r\nof time zones\r\nOther\r\ntime transformations\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-30-time-formats/blog12.jpg",
    "last_modified": "2022-06-30T17:46:39+02:00",
    "input_file": "time-formats.knit.md"
  },
  {
    "path": "posts/2022-05-23-speed/",
    "title": "Speed",
    "description": "How to calculate speed using time and distance between points.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-05-23",
    "categories": [
      "R",
      "tracking",
      "English"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nData ğŸ“–\r\nDistance ğŸ“\r\nTime â°\r\nSpeed ğŸ¥\r\nPlots\r\nFurther reading ğŸ‘©ğŸ½â€ğŸ«\r\n\r\nIntro\r\nThis post is about how to calculate the speed between points.\r\nThis is useful for example when you want to:\r\n- Classify behavioural states of the individuals\r\n- Clean errors in locations\r\nSee examples on the literature at the bottom of this post.\r\nIn this post we will calculate distance between\r\npoints, then the time between those points, and finally\r\nthe speed.\r\nData ğŸ“–\r\nTo do this exercise, load data from the package â€˜sulaâ€™.  For\r\naccessing the data, you need to have the package installed.\r\nTo install:\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\n\r\n\r\n\r\n\r\n\r\nlibrary(sula)\r\n\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nmy_locs<-(GPS_raw)\r\n\r\n\r\n\r\nSelect one individual for the exercise.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n\r\n\r\nID01<-my_locs %>%\r\n  filter(IDs=='GPS01')\r\n\r\n\r\n\r\nDistance ğŸ“\r\nLets select the columns of interest\r\n\r\n\r\nID01_coords<- ID01[,c('Longitude','Latitude')]\r\n\r\n\r\n\r\nConvert the data frame into a spatial object\r\n\r\n\r\nID01_spatial <- sp::SpatialPointsDataFrame(coords = ID01_coords, data = ID01)\r\n\r\n\r\n\r\nUse the corresponding CRS (Coordinate Reference System).\r\nNote that the CRS might change according to your study area.\r\n\r\n\r\nsp::proj4string(ID01_spatial)= sp::CRS(\"+init=epsg:4326\")\r\n\r\n\r\n\r\nUsing the function distm from the package geosphere\r\nto calculate the distance between points.\r\n\r\n\r\nID01_distance<-sapply(2:nrow(ID01_spatial),\r\n                             function(i){geosphere::distm(ID01_spatial[i-1,], ID01_spatial[i,])})\r\n\r\n\r\n\r\nTo add this information to your original data frame:\r\n\r\n\r\nID01_distance<-c(NA,ID01_distance)\r\n\r\n\r\n\r\nTo transform it to kilometers:\r\n\r\n\r\nID01$dist_km<-ID01_distance/1000\r\n\r\n\r\n\r\nTime â°\r\nLets select the columns of interest\r\n\r\n\r\nTimes<-paste(ID01$DateGMT,ID01$TimeGMT)\r\n\r\n\r\n\r\nTransform to the corresponding time formart\r\n\r\n\r\nTimes<-as.POSIXct(strptime(Times,\"%d/%m/%Y %H:%M:%S\"),\"GMT\")\r\n\r\n\r\n\r\nâœ‹ğŸ½ Make sure it did not return NAs, otherwise check the format you\r\nused.\r\nIn this example, we will create a new column with the time using the\r\nfunction lag.\r\n\r\n\r\nLag<-lag(Times)\r\n\r\n\r\n\r\nThen, we will include a column with the original time (in time\r\nformat) and the lag as another column on the original data frame.\r\n\r\n\r\nID01$Time1<-Times\r\nID01$Time2<-Lag\r\n\r\n\r\n\r\nNow, using the function difftime, we can calculate\r\nthe time difference between those columns.\r\nIn units you can select â€œsecsâ€, â€œminsâ€, â€œhoursâ€,â€œdaysâ€,\r\nâ€œweeksâ€.\r\n\r\n\r\nID01$time_dif<-as.numeric(difftime(ID01$Time1,ID01$Time2, units=\"mins\"))\r\n\r\n\r\n\r\nYou can also transform it to hours, with basic conversion.\r\n\r\n\r\nID01$time_hr<-as.numeric(ID01$time_dif/60)\r\n\r\n\r\n\r\nSpeed ğŸ¥\r\nAs simple as speed\r\n= distance Ã· time\r\n\r\n\r\nID01$speed<-ID01$dist_km/ID01$time_hr\r\n\r\n\r\n\r\nPlots\r\nTo visualize the speed from the animal you can also create plots.\r\n\r\n\r\nggplot(ID01, aes(x=speed)) + \r\n  geom_density()+\r\n  theme_minimal()+\r\n  xlab('Speed (km/hr)')\r\n\r\n\r\n\r\n\r\nAlso, you can modify the plots according to the units you want to\r\nuse. Here in m/s.\r\n\r\n\r\nggplot(ID01, aes(x=speed*0.277778)) + \r\n  geom_density(color=\"darkblue\", fill=\"lightblue\")+\r\n  theme_minimal()+\r\n  xlab('Speed (m/s)')\r\n\r\n\r\n\r\n\r\nFurther reading ğŸ‘©ğŸ½â€ğŸ«\r\nSpeed Wikipedia\r\ndefinition\r\nConverters Speed-converter\r\nSome papers that use speed for different pourposes:\r\nRaya Rey et al.Â 2010 â€œâ€¦we\r\nidentified three phases based on sinuosity and speed of the\r\ntrajectoryâ€¦â€\r\nNourani et al.Â 2022 â€œâ€¦all\r\ndata were filtered by speed to ensure that the position information\r\nrepresented period of flightâ€¦â€œ\r\nThe end.\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-23-speed/blog11.jpg",
    "last_modified": "2022-05-24T13:05:58+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-04-07-land-or-not/",
    "title": "Habitat use",
    "description": "How to assign habitat use to animal locations.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-04-07",
    "categories": [
      "R",
      "tracking",
      "spatial",
      "English"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nData ğŸ“–\r\nPoints â©\r\nPolygon ğŸ—ºï¸\r\nOver ğŸï¸\r\nPercentages ğŸ¥§\r\nPlot ğŸ–Œï¸\r\nMap\r\nPercentages\r\n\r\nRecommended literature ğŸ‘©ğŸ½â€ğŸ«\r\n\r\nIntro\r\nThis post is about how to classify locations on your tracking data\r\nbased on an polygon with geographical information.\r\nThis is useful for example when you want to know:\r\n- If the animal is using a specific habitats, and\r\n- To calculate the percentage of use of a specific habitat\r\nSee examples on the recommended literature at the bottom of this\r\npost.\r\nIn this post we will classify tracking locations as\r\nland vs not land.\r\nData ğŸ“–\r\nTo do this exercise, load data from the package â€˜sulaâ€™.  For\r\naccessing the data, you need to have the package installed.\r\nTo install:\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\n\r\n\r\n\r\n\r\n\r\nlibrary(sula)\r\n\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nmy_locs<-(GPS_raw)\r\n\r\n\r\n\r\nCheck how many locations I have per individual\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n\r\n\r\nmy_locs %>%\r\n  drop_na(IDs)%>%\r\n  group_by(IDs)%>%\r\n  tally()\r\n\r\n\r\n# A tibble: 10 x 2\r\n   IDs       n\r\n   <chr> <int>\r\n 1 GPS01  1038\r\n 2 GPS02  1049\r\n 3 GPS03  1246\r\n 4 GPS04  1031\r\n 5 GPS05   962\r\n 6 GPS06  1231\r\n 7 GPS07  1004\r\n 8 GPS08  1015\r\n 9 GPS09   931\r\n10 GPS10   933\r\n\r\nPoints â©\r\nTo transform your GPS locations to spatial data, use the functions\r\nfrom the package sp.\r\nIt would turn your data frame into a\r\nSpatialPointsDataFrame.\r\n\r\n\r\nmy_locs <- as.data.frame(my_locs)\r\nmy_points <-my_locs\r\nsp::coordinates(my_points) <- ~Longitude + Latitude\r\nsp::proj4string(my_points) = sp::CRS(\"+init=epsg:4326\")\r\n\r\n\r\n\r\nPolygon ğŸ—ºï¸\r\nFor the polygon, you can download shapefiles according to your\r\ninterest and area of study.\r\nSome sources of country polygons are:\r\n- DIVA-GIS\r\nBut there are many shapefile sources per country,\r\n- For Chile: several exammples are summarized\r\nhere\r\n- For Mexico: IDEA Infraestructura de\r\nDatos Espaciales Abiertos\r\n- For Germany: BSH-GeoSeaPortal\r\nâ€¦ just to mention a few.\r\nBecause the tracking data from the example was collected in Chile, we\r\nwill use the country shapefile of Chile downloaded from the DIVA-GIS portal.\r\n\r\n\r\n\r\nThe package rgdal has the function\r\nreadOGR which allows us to load the polygon into R.\r\n\r\n\r\nlibrary(rgdal)\r\n\r\n\r\n\r\nThe polygon will be read as\r\nSpatialPolygonDataFrame.\r\n\r\n\r\nmy_polygon<-readOGR(file.path(ShapefilesDirectory,'CHL_adm0.shp')) \r\n\r\n\r\n\r\nOver ğŸï¸\r\nThe function over checks which of the points\r\n(my_locs) fall inside the polygon (my_polygon).\r\nBe cautious, the points and the polygon should be at the same\r\nCRS.\r\n\r\n\r\npolygon_proj <- proj4string(my_polygon)\r\n\r\n\r\n\r\n\r\n\r\nproj4string(my_points) <- polygon_proj\r\n\r\n\r\n\r\nThe function over will return a data frame with the\r\ninformation where the points and the polygon intersect.\r\n\r\n\r\nLandornot_over<- over(my_points, my_polygon)\r\n\r\n\r\n\r\nIt depends on the information of your polygon, but in this particular\r\nexample, in the column NAME_0, if the points fall inside the polygon, it\r\nkeeps â€˜Chileâ€™ otherwise returns an NA.\r\n\r\n\r\nunique(Landornot_over$NAME_0)\r\n\r\n\r\n[1] \"Chile\" NA     \r\n\r\nWe can add this information back to our locations to know which of\r\nthe locations fall inside the territorial land limits or not.\r\n\r\n\r\nmy_locs$landornot <- Landornot_over$NAME_0\r\n\r\n\r\n\r\nTo make it easier to remember you can replace Chile and 0 for the\r\ndata available in your polygon.\r\n\r\n\r\nmy_locs$landornot[is.na(my_locs$landornot)] <- 0\r\n\r\n\r\n\r\n\r\n\r\nmy_locs<-my_locs %>%\r\n  mutate(landornot=\r\n           case_when(\r\n             landornot == 0 ~ 'notland',\r\n             landornot != 0 ~ 'land',\r\n             TRUE ~ \"U\"))\r\n\r\n\r\n\r\nYou can also export this data frame to check in a GIS program.\r\n\r\n\r\nwrite_csv(my_locs,file =paste0(here(\"1Data\"),'/my_locs.csv'))\r\n\r\n\r\n\r\nPercentages ğŸ¥§\r\nNow using functions from the package tidyverse you\r\ncan quantify the numer of locations that the animal was at land or\r\nnot.\r\n\r\n\r\nHabitatuse<-my_locs %>%\r\n  drop_na(IDs)%>%\r\n  group_by(IDs,landornot)%>%\r\n  count()%>%\r\n  pivot_wider(names_from = landornot, values_from = n)\r\n\r\n\r\n\r\nâ€¦ and also calculate the percentage of time using one habitat or the\r\nother.\r\n\r\n\r\nHabitatuse$total<-Habitatuse$land+Habitatuse$notland\r\nHabitatuse$prop_land<-Habitatuse$land*100/Habitatuse$total\r\nHabitatuse$prop_notland<-Habitatuse$notland*100/Habitatuse$total\r\nHabitatuse$prop<-Habitatuse$prop_land+Habitatuse$prop_notland\r\n\r\n\r\n\r\nPlot ğŸ–Œï¸\r\nMap\r\nPlotting the data will help to confirm if the classification is\r\ncorrect.\r\n\r\n\r\nggplot()+\r\n  geom_polygon(data=my_polygon, aes(x=long, y=lat, group=group), color='black',fill='grey')+\r\n  geom_point(data=my_locs, aes(x=Longitude,y=Latitude,color=landornot))+\r\n  scale_color_manual(values=c('#9b2226','#005f73'))+\r\n  theme_bw()+\r\n  theme(legend.position = 'top')+\r\n  labs(x = \"Longitude\", y=\"Latitude\",color='')+\r\n  xlim(-110, -108)+\r\n  ylim(-28.5, -26.5)\r\n\r\n\r\n\r\n\r\nTo customize your plot, you can change many arguments, for example to\r\nchange the theme_bw here are\r\nother options.Do not forget to adjust your xlim and ylim to your\r\ncoordinates.\r\nPercentages\r\nYou can also plot the percentage of habitat use per individual.\r\nTo do this, preparing the information in a long format will\r\nmake it easier to plot.\r\n\r\n\r\nHabitatuse_prop<-Habitatuse %>%\r\n  pivot_longer(c(prop_land,prop_notland),\r\n               names_to = \"habitat_use\",\r\n               values_to = \"prop_use\" )\r\n\r\n\r\n\r\n\r\n\r\nggplot(Habitatuse_prop, aes(fill=habitat_use, y=prop_use, x=IDs)) + \r\n  geom_bar(position=\"fill\", stat=\"identity\")+\r\n  scale_fill_manual(values=c('#9b2226','#005f73'))+\r\n  theme_bw()+\r\n  theme(legend.position = 'top')+\r\n  scale_y_continuous(expand = c(0,0)) \r\n\r\n\r\n\r\n\r\nRecommended literature ğŸ‘©ğŸ½â€ğŸ«\r\nFunction over:Geometry\r\noverlays\r\nExamples in the literature:Quantify\r\nhabitats visitedIndividual\r\nspecialization in an ecological winnerTracking\r\npositions inside the protected areas\r\nIf you can think on another sources of geographical data please do\r\nnot hesitate to write me to include it on the list.\r\nFor more details or suggestions, or just to say hi you can also\r\nalways write me an email\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-04-07-land-or-not/blog10.jpg",
    "last_modified": "2022-04-08T09:18:20+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-03-22-interpolation/",
    "title": "Interpolation",
    "description": "How to interpolate tracking data.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-03-22",
    "categories": [
      "R",
      "tracking",
      "interpolation",
      "English"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nData ğŸ“–\r\nIdentify trips ğŸ›©ï¸\r\nInterpolate ğŸŒ\r\ninterpolate_trips\r\ninterpolate_all\r\n\r\nPlot ğŸ–Œï¸\r\nSummary ğŸ‘©ğŸ½â€ğŸ’»\r\nRecommended sources ğŸ“‘\r\n\r\nIntro\r\nInterpolation is a type of estimation, a method of constructing (or\r\nfinding) new data ponts based on the range of a discrete set of known\r\ndata points (source: wikipedia)\r\nThis post is about:  - How to prepare your data and use the\r\nfunction interpolate from the package sula for\r\ninterpolating your tracking data \r\nInterpolating your data might help you to:  - Fill\r\ngaps on your tracking data, and/or  - To\r\nmake comparable trips when individuals were tracked at\r\ndifferent intervals  â€¦ read more at the end of this page.\r\nâš ï¸However, while interpolating you should be very\r\ncautious, because you are creating locations where the bird might have\r\nnot been.\r\nThis post step by step:\r\n1. Load data\r\n2. Identify nest location / or central location\r\n3. Classify if the animal was inside the central location or\r\noutside\r\n4. Count the number of trips\r\n5. Interpolate only when the animal was on a trip\r\nYou can also just go directly to : interpolate\r\nData ğŸ“–\r\nTo do this exercise, load data from the package â€˜sulaâ€™.  For\r\naccessing the data, you need to have the package installed.\r\nTo install:\r\n\r\n\r\ndevtools::install_github(\"MiriamLL/sula\")\r\n\r\n\r\n\r\n\r\n\r\nlibrary(sula)\r\n\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nGPS_raw<-(GPS_raw)\r\n\r\n\r\n\r\nSelect only one individual.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n\r\n\r\nID01_track<-GPS_raw %>%\r\n  dplyr::filter(IDs=='GPS01')\r\n\r\n\r\n\r\nIdentify trips ğŸ›©ï¸\r\nIdentify the trips allows to remove all the central locations\r\n(e.g.Â the nest), because usually you will be not interested in\r\ninterpolating the locations where the animal was at their central\r\nlocation, only when it was in a trip.\r\nNest location ğŸ£\r\nIs also often the case that at fieldwork, the GPS are activated to\r\nstart recording data just after releasing the animal back to their\r\ncentral location (-nest-)\r\nTherefore, the first location recorded will correspond to their\r\nnest.\r\nTo identify the first location I use the function\r\nlocate_nest from the package sula.\r\nBecause you might have different column names, you can add the names\r\nof your columns here in â€˜column_lonâ€™ and â€˜column_latâ€™.\r\n\r\n\r\nID01_nest<-locate_nest(GPS_data = ID01_track,\r\n                         column_lat = 'Longitude',\r\n                         column_lon = 'Latitude')\r\n\r\n\r\n# A tibble: 1 x 2\r\n  Longitude Latitude\r\n      <dbl>    <dbl>\r\n1     -27.2    -109.\r\n\r\nManually: If you did not activate the GPS at their\r\nnest but you know the nest location, you can manually write it down.\r\n\r\n\r\nID01_nest<-data.frame(Longitude=-109.4531,\r\n                     Latitude=-27.20097)\r\n\r\n\r\n\r\nIdentify trips ğŸ›©ï¸\r\nNow that you have the nest location, the function\r\nidentify_trips from the package sula\r\nhelps you to identify when the bird was out on a trip.\r\nThe function adds a new column, where â€˜Yâ€™ means that the location is\r\noutside the range you select (in the example 1 km), and â€˜Nâ€™ means that\r\nthe location is inside the range you select.\r\nTherefore â€˜Yâ€™ is when the bird was on a trip, and â€˜Nâ€™ is when it was\r\nat the nest.\r\n\r\n\r\nID01_trips<-identify_trips(GPS_data=ID01_track,\r\n                           Nest_location=ID01_nest,\r\n                           Distance_km=1)\r\n\r\n\r\n\r\nCount trips ğŸ§®\r\nThe function count_trips from the package\r\nsula removes the locations that are not trips (for\r\nexample removes all rows where the animal was at the central location)\r\nand adds a column with the number of the trip.\r\n\r\n\r\nID01_onlytrips<-count_trips(GPS_data=ID01_trips)\r\n\r\n\r\n\r\nTo check when the trips started and ended you can also use functions\r\nfrom the package tidyverse.\r\n\r\n\r\nID01_onlytrips %>% \r\n  group_by(trip_number)%>%\r\n  summarise(start=paste(first(DateGMT),first(TimeGMT)),\r\n            end=paste(last(DateGMT),last(TimeGMT)))\r\n\r\n\r\n# A tibble: 5 x 3\r\n  trip_number start               end                \r\n  <chr>       <chr>               <chr>              \r\n1 trip_1      02/11/2017 19:34:31 02/11/2017 20:09:24\r\n2 trip_2      03/11/2017 12:44:04 03/11/2017 14:30:00\r\n3 trip_3      04/11/2017 07:45:17 04/11/2017 09:41:28\r\n4 trip_4      04/11/2017 17:05:36 04/11/2017 20:41:10\r\n5 trip_5      05/11/2017 09:06:13 05/11/2017 11:26:14\r\n\r\nIf you know when the trip started and ended, you can also add the\r\ntrip classification manually, using also functions from\r\nthe package tidyverse.\r\n\r\n\r\nID01_onlytrips <- ID01_trips %>%\r\n  mutate(trip_number=\r\n           case_when(\r\n             DateGMT == '02/11/2017' & TimeGMT >= '19:34:31' & TimeGMT <= '20:09:24' ~ 'trip_1',\r\n             DateGMT == '03/11/2017' & TimeGMT >= '12:44:04' & TimeGMT <= '14:30:00' ~ 'trip_2',\r\n             DateGMT == '04/11/2017' & TimeGMT >= '07:45:17' & TimeGMT <= '09:41:28' ~ 'trip_3',\r\n             DateGMT == '04/11/2017' & TimeGMT >= '17:05:36' & TimeGMT <= '20:41:10' ~ 'trip_4',\r\n             DateGMT == '05/11/2017' & TimeGMT >= '09:06:13' & TimeGMT <= '11:26:14' ~ 'trip_5',\r\n             TRUE ~ \"nest\")) %>%\r\n  filter(trip_number != 'nest')\r\n\r\n\r\n\r\nInterpolate ğŸŒ\r\ninterpolate_trips\r\nOnce the data frame contains columns with Longitude, Latitude, and\r\ntrip_number, the trips can be interpolated.\r\nThe function interpole_trips from the package\r\nsula helps you to interpolate the locations based on an\r\ninterval. In the examples below 900 secs = 15 minutes and 60 sec = 1\r\nminute\r\nBecause you might have different column names, this function has a\r\nlot of arguments, but basically you just need to replace the name of\r\nyour data frame, the interval you are interested to do the\r\ninterpolation, the column names, and the format your date and time is\r\npresented.\r\n\r\n\r\nID01_interpolated15m<-interpolate_trips(GPS_data=ID01_onlytrips,\r\n                                     interval='900 sec',\r\n                                     column_date='DateGMT',\r\n                                     column_time='TimeGMT',\r\n                                     column_trip='trip_number',\r\n                                     column_lat='Latitude',\r\n                                     column_lon='Longitude',\r\n                                     datetime_format<-\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\n\r\n\r\nID01_interpolated1m<-interpolate_trips(GPS_data=ID01_onlytrips,\r\n                                     interval='60 sec',\r\n                                     column_date='DateGMT',\r\n                                     column_time='TimeGMT',\r\n                                     column_trip='trip_number',\r\n                                     column_lat='Latitude',\r\n                                     column_lon='Longitude',\r\n                                     datetime_format<-\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\ninterpolate_all\r\nIn case you want to interpolate a specific trip, or everything\r\n(including the central location), and you already have a datetime column\r\nin the correct format (so R can understand is date and time) there is\r\nalso the function interpolate in the package\r\nsula that interpolates all the locations.\r\nFor example, to interpolate a specific trip, subset the trip you are\r\ninterested in interpolating.\r\n\r\n\r\nGPS01_trip5<-GPS_preparado %>%\r\n  filter(IDs=='GPS01')%>%\r\n  filter(trip_number=='trip_5')\r\n\r\n\r\n\r\nUse the function interpolate. Here I select the\r\ndataframe, the interval ofinterest, and the name of the columns that\r\nwill be included in the interpolation.\r\n\r\n\r\nGPS01_trip1_interpolated<-interpolate(GPS_data = GPS01_trip5,\r\n                                      interval='10 sec',\r\n                                      column_datetime = 'dia_hora',\r\n                                      column_lat = 'Latitude',\r\n                                      column_lon = 'Longitude')\r\n\r\n\r\n\r\nPlot ğŸ–Œï¸\r\nNow lets compare the before and after, the tracking data vs the\r\ninterpolated data.\r\nThe package patchwork lets us see the plots side by\r\nside.\r\n\r\n\r\nlibrary(patchwork)\r\n\r\n\r\n\r\nCreate three plots, one using the original points, and two using the\r\ninterpolation to compare.\r\n\r\n\r\nOriginal_track<-ggplot(ID01_onlytrips, aes(x=Longitude, y=Latitude, color=trip_number)) + \r\n  geom_point()+\r\n  theme_bw()+\r\n  ggtitle('Original tracking data')+\r\n  theme(legend.position='none')\r\nInterpolated_15m<-ggplot(ID01_interpolated15m, aes(x=Longitude, y=Latitude, color=trip_number)) + \r\n  geom_point()+\r\n  theme_bw()+\r\n  ggtitle('Interpolated to 15 mins')+\r\n  theme(legend.position='none')\r\nInterpolated_1m<-ggplot(ID01_interpolated1m, aes(x=Longitude, y=Latitude, color=trip_number)) + \r\n  geom_point()+\r\n  theme_bw()+\r\n  ggtitle('Interpolated to 1 min')+\r\n  theme(legend.position='right')\r\nOriginal_track+Interpolated_15m+Interpolated_1m\r\n\r\n\r\n\r\n\r\nNow it is up to you to decide which interpolation interval fits\r\nbetter to your study.\r\nSummary ğŸ‘©ğŸ½â€ğŸ’»\r\nTL;DR (too long; didnâ€™t read)\r\n\r\n\r\nlibrary(sula)\r\nlibrary(tidyverse)\r\n\r\nID01_track<-GPS_raw %>% filter(IDs=='GPS01')\r\n\r\nID01_nest<-data.frame(Longitude=-109.4531,Latitude=-27.20097)\r\n\r\nID01_trips<-identify_trips(GPS_data=ID01_track,Nest_location=ID01_nest,Distance_km=1)\r\n\r\nID01_onlytrips<-count_trips(GPS_data=ID01_trips)\r\n\r\nID01_interpolated15m<-interpolate_trips(GPS_data=ID01_onlytrips,\r\n                                        interval='900 sec',\r\n                                        column_date='DateGMT',\r\n                                        column_time='TimeGMT',\r\n                                        column_trip='trip_number',\r\n                                        column_lat='Latitude',\r\n                                        column_lon='Longitude',\r\n                                        datetime_format<-\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\nRecommended sources ğŸ“‘\r\nSome of the reasons to interpolate data are:\r\nTo fit the GPS locations with diving data. For example: Lerma\r\net al.Â 2020, Browning\r\net al.Â 2017\r\nBecause the recorded data was different between individuals, and\r\nthus interpolating data provides fixed intervals. For example: Borrmann et\r\nal.Â 2019\r\nTo fill occasional gaps in the tracking data, particularly for\r\nanimals that dive and do not receive signal when submerged. For example:\r\nIorio-Merlo\r\net al.Â 2022.\r\nIf you can think on another case when interpolation is necessary\r\nplease do not hesitate to write me to include it on the list.\r\nAlso if you use the function from the package sula\r\nplease consider including the package in your citations.\r\nFor more details or suggestions you can also always write me an email\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-03-22-interpolation/blog9.jpg",
    "last_modified": "2022-04-07T15:05:57+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-02-24-timeoverlaps/",
    "title": "Time overlaps",
    "description": "Find overlapping time periods.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-02-24",
    "categories": [
      "R",
      "tracking",
      "timestamp",
      "English"
    ],
    "contents": "\r\nIntro\r\nThis post is about how to find overlapping times between your tracked\r\nindividuals.  This might help you to:  - Identify periods where\r\nyou have gaps for each individual, or  - To\r\nselect which periods are comparable among individuals\r\nthat might have been tracked on different periods \r\nData\r\nTo replicate the exercise, load data from the package â€˜sulaâ€™. \r\nFor accessing the data, you need to have the package installed.\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\nlibrary(sula)\r\n\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nGPS_raw<-(GPS_raw)\r\n\r\n\r\n\r\nPlot\r\nFor this exercise you should install or have installed the package\r\nggplot.\r\n\r\n\r\nlibrary(ggplot2)\r\n\r\n\r\n\r\nIn the example data, time and date are in separated columns,\r\ntherefore the first step is to join those columns.\r\n\r\n\r\nGPS_raw$DateTime<-paste(GPS_raw$DateGMT,GPS_raw$TimeGMT)\r\n\r\n\r\n\r\nFor plotting times, it is important that the column with the\r\ntimestamps is in a time format. Be cautious with the format of your time\r\nstamps.\r\n\r\n\r\nGPS_raw$DateTime<-as.POSIXct(strptime(GPS_raw$DateTime, \"%d/%m/%Y %H:%M:%S\"),tz = \"GMT\")\r\n\r\n\r\n\r\nNow for plotting, you can use the timestamp for the x axis and the\r\nIDs of each individual as the y axis.\r\nIf you want each individual to be plotted in different color, you can\r\nalso add the name of the column after the argument\r\ncolor=.\r\n\r\n\r\nPlot_tracking<-ggplot(data=GPS_raw,\r\n                      aes(x=DateTime,\r\n                          y=IDs,\r\n                          color=IDs))+\r\n    geom_point(size=3)+\r\n    geom_line()+\r\n    theme_bw()\r\nPlot_tracking\r\n\r\n\r\n\r\n\r\nModify legend\r\nBecause is a ggplot, many things can be further customized.\r\nSuch as the legends\r\nHere, I remove the legend from the side (legend.position=â€˜noneâ€™),\r\nmodify the legend in the x axis to â€˜individualsâ€™, and change the angle\r\nof the x axis to 60 degrees.\r\n\r\n\r\nPlot_tracking+\r\n    theme(legend.position='none')+\r\n    labs(x = \"\", y = \"Individuals\") +\r\n        theme(axis.text.x=element_text(angle=60, hjust=1))+\r\n    theme(plot.title = element_text(size = 10, face = \"bold\"))\r\n\r\n\r\n\r\n\r\nChange breaks\r\nYou can also select how detailed the x axis legend should be and how\r\noften you want the breaks.\r\nFor one day breaks:\r\n\r\n\r\nPlot_tracking + scale_x_datetime(date_labels = \"%d %b %Y\",date_breaks = \"1 day\")\r\n\r\n\r\n\r\n\r\nFor one week breaks:\r\n\r\n\r\nPlot_tracking + scale_x_datetime(date_labels = \"%d %b %Y\",date_breaks = \"1 week\")\r\n\r\n\r\n\r\n\r\nFor one month breaks:\r\n\r\n\r\nPlot_tracking + scale_x_datetime(date_labels = \"%d %b %Y\",date_breaks = \"1 month\")\r\n\r\n\r\n\r\n\r\nIt doesnt show, because all were in the same month, but it might be\r\nuseful for you to know this argument.\r\nAdd lines\r\nYou can also mark separations between periods using a line.\r\nTo do so, first you have to make the period where you want to make\r\nthe line as POSIXct\r\n\r\n\r\nPA<-as.POSIXct(strptime(\"2017-11-07 00:00:00\", \"%Y-%m-%d %H:%M:%S\"),tz = \"GMT\")\r\n\r\n\r\n\r\nThen you add the line to the ggplot using the function geom_vline (v\r\nfrom vertical line)  Use the period you have interest on getting the\r\nline as xintercept, and  The\r\nlinetypes options can be seen here.\r\nThe color depends on your preference, here I use red to make it easy to\r\nsee at first glance.\r\n\r\n\r\nPlot_tracking+\r\n  geom_vline(xintercept=PA,\r\n                linetype=4, colour=\"red\")\r\n\r\n\r\n\r\n\r\nAdd rectangle\r\nNow if you want to add a rectangle, there are many option but I\r\nprefer to use annotation\r\nFirst I create an object with the timestamps of where I want the\r\nrectangle to begging and end.\r\n\r\n\r\nPA<-as.POSIXct(strptime(\"2017-11-01 00:00:00\", \"%Y-%m-%d %H:%M:%S\"),tz = \"GMT\")\r\nPB<-as.POSIXct(strptime(\"2017-11-07 00:00:00\", \"%Y-%m-%d %H:%M:%S\"),tz = \"GMT\")\r\n\r\n\r\n\r\nThen I add it to the plot  The xmin is the time\r\nwhere the rectangle will start, and the xmax where it\r\nwould end.  Because I want the rectangle to cover the area I used\r\n-Inf and Inf.  The color is in\r\nfill, and the alpha is to have some\r\ntransparency (the lower the value the more transparent will be, and the\r\nvalues go from 0 to 1).\r\n\r\n\r\nPlot_tracking + annotate(\"rect\",\r\n                         xmin = PA, xmax = PB, \r\n                         ymin = -Inf, ymax = Inf,  \r\n                         fill = \"blue\", alpha=0.1)\r\n\r\n\r\n\r\n\r\nExport\r\nTo export your plot, you can use the argument\r\nggsave\r\nThe simplest is just to give it a name to your plot, and ggsave will\r\nsave the latest plot you have created.\r\nTo be able to see it other programs, you will have to give it an\r\nextention. Some options are: png, eps, pdf, jpeg, tiff, bmp or svg\r\n\r\n\r\nggsave(filename = \"~/Figure.png\")\r\n\r\n\r\n\r\nNote that if you want the figure to be saved on specific folder, you\r\nneed to include the path in the file name.\r\n\r\n\r\nggsave(filename = \"~Results/Figure.png\")\r\n\r\n\r\n\r\nIf you want to create several figures and want to export just\r\nspecific ones, you can also use the name of the plot to export only that\r\none.\r\n\r\n\r\nggsave(Plot_tracking, \r\n       filename = \"~/Figura.png\")\r\n\r\n\r\n\r\nAlso, if you want specific widths and heights, or even dpi, you can\r\nalso include it. Just note that the size of the letters might need to be\r\nadjusted.\r\n\r\n\r\nggsave(Plot_tracking, \r\n       filename = \"~/Figura.png\",\r\n       width = 24, \r\n       height = 24, \r\n       units = \"in\",\r\n       dpi = 500)\r\n\r\n\r\n\r\nI hope this was useful for you, and if you want to go deep in some\r\naspects of ggplot check the recommended sources below.\r\nRecommended sources\r\nggplot2\r\nggsave\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-02-24-timeoverlaps/blog8.jpg",
    "last_modified": "2022-03-23T11:28:29+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-01-21-sharedareas/",
    "title": "Shared Areas",
    "description": "Calculate area per polygon, their intersection and the shared areas",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2022-01-21",
    "categories": [
      "R",
      "spatial",
      "shapefiles",
      "English"
    ],
    "contents": "\r\nIntro\r\nHere, some steps for:\r\nGenerating kernel polygons\r\nCalculating the intersection between two polygons\r\nPlotting polygons and their intersection\r\nCreating a table with the shared areas between two polygons\r\nData\r\nTo replicate the exercise, load data from the package â€˜sulaâ€™. For accessing the data, you need to have the package installed.\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\nlibrary(sula)\r\n\r\n\r\n\r\nThe data is from 10 tracked individuals.\r\n\r\n\r\nGPS_raw<-(GPS_raw)\r\n\r\n\r\n\r\nCreate polygons\r\nSelect which individuals you want to compare\r\n\r\n\r\nGPS01<-subset(GPS_raw,GPS_raw$IDs=='GPS01')\r\nGPS02<-subset(GPS_raw,GPS_raw$IDs=='GPS02')\r\n\r\n\r\n\r\nWith the following function you can create the polygon of the individual using an specific value.\r\nYour need to provide the name of the column that contains the latitude, the name of the column that contains the longitude, and the value you want to calculate (E.g. core=50, general=95).\r\n\r\n\r\ncreate_polygon<-function(Data=Data, lon_col=lon_col,lat_col=lat_col,value=value){\r\n  \r\n  Data<-Data\r\n  Data$Longitude<-Data[[lon_col]]\r\n  Data$Latitude<-Data[[lat_col]]\r\n    \r\n  #convert to spatial\r\n  DataSp<-as.data.frame(Data)\r\n  sp::coordinates(DataSp) <- c(\"Longitude\", \"Latitude\")\r\n  sp::proj4string(DataSp) <- sp::CRS(\"+init=epsg:4326\")\r\n  \r\n  #create polygon\r\n  DataSp<-adehabitatHR::kernelUD(DataSp,h=\"href\") # Using reference\r\n  Data_50<-adehabitatHR::getverticeshr(DataSp,percent=value)\r\n  \r\n  Data_sf_50<-sf::st_as_sf(Data_50)\r\n  \r\n  return(Data_sf_50)\r\n}\r\n\r\n\r\n\r\nCalculate polygons of 50%.\r\nSome warnings may appear\r\n\r\n\r\nGPS01_50<-create_polygon(Data=GPS01,lat_col=\"Latitude\",lon_col=\"Longitude\",value=50)\r\nGPS02_50<-create_polygon(Data=GPS02,lat_col=\"Latitude\",lon_col=\"Longitude\",value=50)\r\n\r\n\r\n\r\nCalculate polygons of 95%.\r\n\r\n\r\nGPS01_95<-create_polygon(Data=GPS01,lat_col=\"Latitude\",lon_col=\"Longitude\",value=95)\r\nGPS02_95<-create_polygon(Data=GPS02,lat_col=\"Latitude\",lon_col=\"Longitude\",value=95)\r\n\r\n\r\n\r\nCompare\r\nWith the function intersection of the package sf you can obtain the area where both polygons intersect\r\n\r\n\r\nlibrary(sf)\r\n\r\n\r\n\r\n\r\n\r\n\r\nSource: Geocompr\r\n\r\n\r\nIntersection_95<-st_intersection(GPS01_95,GPS02_95)\r\nIntersection_50<-st_intersection(GPS01_50,GPS02_50)\r\n\r\n\r\n\r\nPlot\r\nUsing the following function plot_overlaps and the package ggplot, you can visualize where the intersection is occurring\r\n\r\n\r\nlibrary(ggplot2)\r\n\r\n\r\n\r\n\r\n\r\nplot_overlaps<-function(ID1_95=ID1_95,ID1_50=ID1_50,ID2_95=ID2_95,ID2_50=ID2_50){\r\n  \r\n  Plot<-ggplot2::ggplot()+\r\n  \r\n    ggplot2::geom_sf(data = ID1_95,color='#d00000',fill = \"#d00000\",alpha=0.3,size=1)+ \r\n    ggplot2::geom_sf(data = ID2_95,color='#3f88c5',fill = \"#3f88c5\",alpha=0.3,size=1)+\r\n    ggplot2::geom_sf(data = Intersection_95,  color='#ffba08', fill = \"#ffba08\",alpha=0.3,size=1)+\r\n    \r\n    ggplot2::geom_sf(data = ID1_50,color='#d00000',fill = \"#d00000\",alpha=0.7,size=1)+\r\n    ggplot2::geom_sf(data = ID2_50,color='#3f88c5', fill = \"#3f88c5\",alpha=0.7,size=1)+ \r\n    ggplot2::geom_sf(data = Intersection_50,  color='#ffba08', fill = \"#ffba08\",alpha=0.7,size=1)+\r\n    \r\n    ggplot2::labs(x = \"Longitude\", y=\"Latitude\")+\r\n    \r\n    theme_bw()\r\n  \r\n  return(Plot)\r\n}\r\n\r\n\r\n\r\nIt would show a map with your polygons\r\n\r\n\r\noverlap_plot<-plot_overlaps(ID1_95=GPS01_95,\r\n                            ID1_50=GPS01_50,\r\n                            ID2_95=GPS02_95,\r\n                            ID2_50=GPS02_50)\r\n  \r\noverlap_plot\r\n\r\n\r\n\r\n\r\nCreate table\r\nOnce you have your polygons for each individual and also the intersection between polygons, you can now create a table using the following custom function table_areas\r\nTo calculate the shared area, the function follows the formula as in Hedd et al.Â 2014 and McFarlane Tranquila et al.Â 2013\r\n\r\n\r\ntable_areas<-function(ID1_50=ID1_50,\r\n                      ID2_50=ID2_50,\r\n                      ID1_95=ID1_95,\r\n                      ID2_95=ID2_95,\r\n                      Intersection_50=Intersection_50,\r\n                      Intersection_95=Intersection_95){\r\n  \r\n  Tabla<-data.frame(\r\n  UDs=c(\"50\",\"95\"),\r\n  \r\n  ID1_area_km2=c(\r\n    round(as.numeric(units::set_units(st_area(ID1_50),km^2)),2),\r\n    round(as.numeric(units::set_units(st_area(ID1_95),km^2),2))\r\n    ),\r\n  \r\n  ID2_area_km2=c(\r\n    round(as.numeric(units::set_units(st_area(ID2_50),km^2),2)),\r\n    round(as.numeric(units::set_units(st_area(ID2_95),km^2),2))\r\n    ),\r\n  \r\n  intersection_area_km2=c(\r\n    round(as.numeric(units::set_units(st_area(Intersection_50),km^2),2)),\r\n    round(as.numeric(units::set_units(st_area(Intersection_95),km^2),2))\r\n  )\r\n  )\r\n  \r\n  Tabla$shared_area_percent<-\r\n  (Tabla$intersection_area_km2)/\r\n    (\r\n      (Tabla$ID1_area_km2 - Tabla$intersection_area_km2) + \r\n       (Tabla$ID2_area_km2 - Tabla$intersection_area_km2) + \r\n       Tabla$intersection_area_km2)\r\n  \r\n  return(Tabla)\r\n}\r\n\r\n\r\n\r\nThe table contains the area of each polygon, the intersection and the shared areas\r\n\r\n\r\nareas_table<-table_areas(ID1_50=GPS01_50,\r\n                      ID2_50=GPS02_50,\r\n                      ID1_95=GPS01_95,\r\n                      ID2_95=GPS02_95,\r\n                      Intersection_50=Intersection_50,\r\n                      Intersection_95=Intersection_95)\r\n\r\n\r\n\r\nIt should return a table as the following:\r\n\r\n\r\nUDs\r\n\r\n\r\nID1_area_km2\r\n\r\n\r\nID2_area_km2\r\n\r\n\r\nintersection_area_km2\r\n\r\n\r\nshared_area_percent\r\n\r\n\r\n50\r\n\r\n\r\n7.5\r\n\r\n\r\n8\r\n\r\n\r\n5\r\n\r\n\r\n0.4761905\r\n\r\n\r\n95\r\n\r\n\r\n546.0\r\n\r\n\r\n380\r\n\r\n\r\n215\r\n\r\n\r\n0.3023910\r\n\r\n\r\nExport\r\nTo export the table as csv:\r\n\r\n\r\nwrite_csv(areas_table,'areas_table.csv')\r\n\r\n\r\n\r\nTo export the polygons as shapefiles:\r\n\r\n\r\nst_write(GPS01_50, \"GPS01_50.shp\")\r\nst_write(GPS02_50, \"GPS02_95.shp\")\r\nst_write(Intersection_50, \"Intersection_50.shp\")\r\n\r\nst_write(GPS01_95, \"GPS01_95.shp\")\r\nst_write(GPS02_95, \"GPS02_95.shp\")\r\nst_write(Intersection_95, \"Intersection_95.shp\")\r\n\r\n\r\n\r\nRecommended literature\r\nGeocomputation in R\r\nShared areas formula by Hedd et al.Â 2018 and McFarlane Tranquila et al.Â 2013\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-01-21-sharedareas/blog7.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-11-25-embc/",
    "title": "EMbC",
    "description": "Classify behaviours using Expectation-Maximization Binary Clustering.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-11-25",
    "categories": [
      "R",
      "funciones",
      "English"
    ],
    "contents": "\r\nIntro\r\nIn this post, you will learn how to:  - Classify behavioural\r\nstates during foraging trips from test data from Masked boobies.\r\n\r\nData\r\nLoad data. This test data is from masked boobies.  To access the\r\ndata you have to install the package sula:\r\ndevtools::install_github(â€œMiriamLL/sulaâ€)\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\nlibrary(sula)\r\n\r\n\r\n\r\n\r\n\r\nGPS_raw<-as.data.frame(GPS_raw)\r\nGPS_ind<-subset(GPS_raw,GPS_raw$IDs=='GPS01')\r\n\r\n\r\n\r\nNest or no nest?\r\nThe data I am using does not include locations when\r\nthe animal was on the nest.\r\nTo remove the nest locations, in the package sula\r\nthere is this function recortar_periodo which allows\r\nyou to filter your data and keep the period when the bird was at\r\nsea.\r\nFor the example, I know the time when this individual (GPS_01)\r\nstarted and ended its trip and keep the locations inside this time\r\nrange.\r\nIf you dont have this information, you might need to first identify\r\nthe start and end of trips.\r\n\r\n\r\nGPS_ind<-recortar_periodo(GPS_data=GPS_ind,\r\n                                inicio='02/11/2017 18:10:00',\r\n                                final='05/11/2017 14:10:00',\r\n                                dia_col='DateGMT',\r\n                                hora_col='TimeGMT',\r\n                                formato=\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\n ES: El track original contenia 1038 filas y el track editado contiene 986 filas \r\n EN: The original track had 1038 rows, and the edited track has 986\r\n\r\nNext, I create a new column named tStamp and transformed it to the\r\ncorresponding class.\r\n\r\n\r\nGPS_ind$tStamp<-paste(GPS_ind$DateGMT,GPS_ind$TimeGMT)\r\nGPS_ind$tStamp <- as.POSIXct(strptime(GPS_ind$tStamp,\"%d/%m/%Y %H:%M:%S\"),\"GMT\")\r\nclass(GPS_ind$tStamp)\r\n\r\n\r\n[1] \"POSIXct\" \"POSIXt\" \r\n\r\nCheck that you have the right class for your columns.\r\n\r\n\r\nGPS_ind$lon<-as.numeric(GPS_ind$Longitude)\r\nGPS_ind$lat<-as.numeric(GPS_ind$Latitude)\r\nGPS_ind$id <- as.factor(GPS_ind$IDs)\r\n\r\n\r\n\r\nThen I select only columns that will be important in the\r\nanalyses.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n\r\n\r\nData<-GPS_ind%>%\r\n  select('id','tStamp','lon','lat')\r\nhead(Data)\r\n\r\n\r\n      id              tStamp       lon       lat\r\n17 GPS01 2017-11-02 18:11:57 -109.4530 -27.20092\r\n18 GPS01 2017-11-02 18:16:04 -109.4531 -27.20096\r\n19 GPS01 2017-11-02 18:20:10 -109.4530 -27.20096\r\n20 GPS01 2017-11-02 18:24:16 -109.4530 -27.20094\r\n21 GPS01 2017-11-02 18:28:24 -109.4530 -27.20096\r\n22 GPS01 2017-11-02 18:32:29 -109.4531 -27.20099\r\n\r\nEMbC\r\nI strongly recommend to read this article by Garriga\r\net al.Â 2016 and to check the vignette.\r\nAs in vignette: â€˜The Expectation-maximization binary clustering\r\n(EMbC) is a general purpose, unsupervised, multi-variate, clustering\r\nalgorithm, driven by two main motivations: (i) it looks for a good\r\ncompromise between statistical soundness and ease and generality of use\r\n- by minimizing prior assumptions and favouring the semantic\r\ninterpretation of the final clustering - and, (ii) it allows taking into\r\naccount the uncertainty in the data. These features make it specially\r\nsuitable for the behavioural annotation of animalâ€™s movement\r\ntrajectories.â€™\r\nYou need to have the package installed otherwise you need to install\r\nit using the install.packages(â€˜EMbCâ€™).\r\n\r\n\r\nlibrary(EMbC)\r\n\r\n\r\n\r\nIn the package EMbC, the function stbc performs the\r\nstandard velocity/turn clustering of the trajectory.\r\nIn the script, [2:4] means that you are including from the 2nd to the\r\n4th column. These columns should be 2th - tStamp, 3th - lon, and 4th -\r\nlat.\r\nThe -1 in info means that any iteration is supress.\r\n\r\n\r\nData_bc<-stbc(Data[2:4],info=-1) \r\n\r\n\r\n[1]   0  -0.0000e+00       4       986\r\n[1] ... Stable clustering\r\n\r\nCheck delimiters\r\nMean and sd\r\nIn the package EMbC, the function stts offers a\r\ncompact view of the parameter set.\r\nLL stands for Low velocity Low turn\r\nLH stands for Low velocity High turn\r\nHL stands for High velocity Low turn\r\nHH stands for High velocity High turn\r\nkn is the marginal distribution of the cluster in absolute and\r\npercentage values\r\n\r\n\r\nstts(Data_bc)\r\n\r\n\r\n         X1.mn    X1.sd    X2.mn    X2.sd     kn  kn(%)\r\n 1 LL     0.06     0.10     1.47     0.86    519  52.64 \r\n 2 LH     0.08     0.10     2.95     0.14    293  29.72 \r\n 3 HL     9.51     5.07     0.17     0.13    103  10.45 \r\n 4 HH     4.83     3.94     1.59     0.92     70   7.10 \r\n\r\nMins and Maxs\r\nYou can also check the mimimum and maximum velocity and radians\r\n(turning angle) using the function @R from the package EMbC.\r\nX1.min is the minimum velocity\r\nX2.min is the minimum turning angle\r\nX1.max is the maximum velocity\r\nX2.max is the maximum turning angle\r\n\r\n\r\nData_bc@R\r\n\r\n\r\n        X1.min    X2.min     X1.max    X2.max\r\n1.LL 0.0000000 0.0000000  0.9197180 2.6603235\r\n2.LH 0.0000000 2.6603235  0.4699243 3.1409141\r\n3.HL 0.9197180 0.0000000 20.2502838 0.4694153\r\n4.HH 0.4699243 0.4694153 20.2502838 3.1409141\r\n\r\nHere is important that you check that these values make sense.\r\nTurning angle should be between 0 and 3.14. Velocity varies according to\r\nyour species.\r\nFor boobies this information can be translated to:\r\nLL for Resting\r\nLH for Intense foraging\r\nHL for Travelling\r\nHH for Relocating\r\nYou can also compare your results with Table 2 in Mendez et al.Â 2017, or in\r\nmethods from Lerma\r\net al.Â 2020\r\nGraphically\r\nTo see this information graphically, you can use the function\r\nsctr from the package EMbC.\r\nLL - Resting - in orange\r\nLH - Intense foraging - in red\r\nHL - Travelling - in light blue\r\nHH - Relocating - in dark blue\r\n\r\n\r\nsctr(Data_bc)\r\n\r\n\r\n\r\n\r\nTo see how the track looks according to the classification you can\r\nuse the view function from the package EMbC.\r\n\r\n\r\nEMbC::view(Data_bc)\r\n\r\n\r\n\r\n\r\nExport delimiters\r\nTo export the delimiters you can extract information using\r\n@R into a\r\ndata frame and rename the columns.\r\n\r\n\r\nClass_bc<-as.data.frame(Data_bc@R)\r\nnames(Class_bc)<-c('velocity.min','radian.min','velocity.max','radian.max')\r\n\r\n\r\n\r\nOriginally, the values of velocity are in m/s, therefore you can\r\nconvert them to km/h to compare with the literature more easily.\r\n\r\n\r\nClass_bc$velomin_km<-Class_bc$velocity.min*3.6\r\nClass_bc$velomax_km<-Class_bc$velocity.max*3.6\r\n\r\n\r\n\r\nYou can use the function write_csv to export the\r\ndelimiters.\r\nIn the example below, I use the function here and\r\ndefine the folder where I want the file to be.\r\n\r\n\r\nlibrary(here)\r\nDatosFolder<-here::here(\"01Datos\")\r\nwrite_csv(\r\n  Class_bc,\r\n  file=paste0(DatosFolder,'/Behavioural_delimiters.csv'))\r\n\r\n\r\n\r\nTracking data\r\nBehaviors\r\nYou can add the information of velocity and turning angle into you\r\nGPS data using the function @A from the package EMbC\r\n\r\n\r\nData$Beha<-Data_bc@A\r\n\r\n\r\n\r\nIt returns numbers which correspond to:\r\n1 - LL - Resting\r\n2 - LH - Intense foraging\r\n3 - HL - Travelling\r\n4 - HH - Relocating\r\n5 - Unknown\r\nIf you want to add a column explaining what this numbers mean you can\r\nuse the following functions.\r\n\r\n\r\nlibrary(dplyr)\r\n\r\n\r\n\r\n\r\n\r\nData<-mutate(Data, Beha_class = ifelse(Data$Beha == \"1\", \"LL\",\r\n                                        ifelse(Data$Beha == \"2\", \"LH\",\r\n                                               ifelse(Data$Beha == \"3\", 'HH',\r\n                                                      ifelse(Data$Beha == \"4\", \"HL\", \r\n                                                             \"Unknown\")))))\r\n\r\n\r\n\r\nor\r\n\r\n\r\nData<-mutate(Data, Behaviour = ifelse(Data$Beha == \"1\", \"Resting\",\r\n                                        ifelse(Data$Beha == \"2\", \"Intense foraging\",\r\n                                               ifelse(Data$Beha == \"3\", 'Travelling',\r\n                                                      ifelse(Data$Beha == \"4\", \"Relocating\", \r\n                                                             \"Unknown\")))))\r\n\r\n\r\n\r\nVelocity\r\nYou can add the velocity in a colum of your GPS data frame using the\r\nfunction @X from the package EMbC\r\n\r\n\r\nhead(Data_bc@X)\r\n\r\n\r\n     velocity (m/s) turn (rad)\r\n[1,]    0.038911247  0.0000000\r\n[2,]    0.036230799  2.6587646\r\n[3,]    0.009904929  1.1311206\r\n[4,]    0.011112843  3.0577897\r\n[5,]    0.033537583  0.6261461\r\n[6,]    0.037807521  0.2016767\r\n\r\nVelocity is in the first column, therefore we use the [,1]. Also, to\r\ntransform it to km/h multiply per 3.6.\r\n\r\n\r\nData$Velocity_ms<-Data_bc@X[,1]\r\nData$Velocity_kmh<-Data$Velocity_ms*3.6\r\n\r\n\r\n\r\nHeading direction\r\nHeading direction is on the second column, therefore we use the\r\n[,2].\r\n\r\n\r\nData$HeadingDirection<-Data_bc@X[,2]\r\n\r\n\r\n\r\nCheck\r\nFinally you can check the range to coincide with your delimiters.\r\n\r\n\r\nData %>% \r\n  group_by(Behaviour) %>%\r\n  summarise(Velo_min=min(Velocity_kmh),\r\n            Velo_max=max(Velocity_kmh),\r\n            Angle_min=min(HeadingDirection),\r\n            Angle_max=max(HeadingDirection))\r\n\r\n\r\n# A tibble: 5 x 5\r\n  Behaviour        Velo_min Velo_max Angle_min Angle_max\r\n  <chr>               <dbl>    <dbl>     <dbl>     <dbl>\r\n1 Intense foraging  0.0172      1.60   2.68        3.14 \r\n2 Relocating        1.44       47.6    0.507       3.14 \r\n3 Resting           0.00363     1.38   0           2.68 \r\n4 Travelling        1.45       72.9    0.00105     0.499\r\n5 Unknown           0           0      0           0    \r\n\r\nPlot\r\nYou can plot the GPS tracking data according to their behaviours\r\nusing the function ggplot\r\n\r\n\r\nggplot(data = Data, \r\n           aes(x=lon, y = lat))+\r\n  geom_point(aes(colour = Behaviour))+\r\n  theme_bw()+\r\n  theme(legend.position = \"bottom\") +\r\n   labs(x = \"Longitude\", y=\"Latitude\")+\r\n  ggtitle('Fig. Tracks')\r\n\r\n\r\n\r\n\r\nFurther\r\nIf you are not satisfied with the classification and the delimiters,\r\nyou can set your own behavioural classification using the turning angle\r\nand velocity.\r\nFor example, using data from Mendez et al 2017.\r\n\r\n\r\nData<-mutate(Data, New_beha = ifelse(Data$Velocity_kmh >= 0 & \r\n                                      Data$Velocity_kmh <= 4 &\r\n                                      Data$HeadingDirection >= 0 &\r\n                                      Data$HeadingDirection <= 0.30, \r\n                                      \"Resting\",\r\n                               ifelse(Data$Velocity_kmh >= 0 & \r\n                                      Data$Velocity_kmh <= 14 &\r\n                                      Data$HeadingDirection >= 0.30 &\r\n                                      Data$HeadingDirection <= 3.14, \r\n                                      \"IntenseForaging\",\r\n                                ifelse(Data$Velocity_kmh >= 4 & \r\n                                      Data$Velocity_kmh <= 90 &\r\n                                      Data$HeadingDirection >= 0 &\r\n                                      Data$HeadingDirection <= 0.31, \r\n                                      \"Travelling\",\r\n                                ifelse(Data$Velocity_kmh >= 14 & \r\n                                      Data$Velocity_kmh <= 90 &\r\n                                      Data$HeadingDirection >= 0.31 &\r\n                                      Data$HeadingDirection <= 3.14, \r\n                                      \"Relocating\",\r\n                                    \"Unknown\")))))\r\n\r\n\r\n\r\n\r\n\r\nggplot(data = Data, \r\n           aes(x=lon, y = lat))+\r\n  geom_point(aes(colour = New_beha))+\r\n  theme_bw()+\r\n  theme(legend.position = \"bottom\") +\r\n   labs(x = \"Longitude\", y=\"Latitude\")+\r\n  ggtitle('Fig. Tracks')\r\n\r\n\r\n\r\n\r\nReferences and\r\nrecommended literature\r\nEMbC\r\nGarriga\r\net al.Â 2016\r\nVignette\r\nBoobies\r\nLerma et\r\nal.Â 2020\r\nMendez et\r\nal.Â 2017\r\nOther Species\r\nConnectedPapers\r\nAlternative options\r\nHidden\r\nMarkov Models\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-11-25-embc/blog6.jpg",
    "last_modified": "2022-03-23T11:25:20+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-10-27-gitgithub/",
    "title": "Git & Github",
    "description": "A short intro.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-10-27",
    "categories": [
      "R",
      "Git",
      "Github",
      "English"
    ],
    "contents": "\r\n\r\n\r\n\r\nIntro\r\nIn this presentation, we will have a short intro on: - Git - Github - Reproducibility - Git+Github - Naming things\r\nâš¡âš¡âš¡\r\n\r\n\r\n\r\n\r\n Open presentation\r\n\r\nâš¡âš¡âš¡\r\nKeen to learn more?\r\nHappy git: Happy Git by Jennifer Bryan\r\nTutorials RLadiesFreiburg\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-10-27-gitgithub/portada1.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-09-24-home-range-adehabitathr/",
    "title": "Home Range & adehabitatHR",
    "description": "Export polygons generated from adehabitat.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-09-24",
    "categories": [
      "R",
      "spatial",
      "shapefiles",
      "English"
    ],
    "contents": "\r\nIntro\r\nIn this post, you will learn how to:  - Calculate UDs from test data from Masked boobies.  - Calculate UDs using adehabitat.  - Export UDs as shapefiles to visualize in other programs. \r\nNote that reference system must be adjusted, also href can be adapted.\r\nData\r\nLoad data. This test data is from masked boobies.  To access the data you have to install the package sula: devtools::install_github(â€œMiriamLL/sulaâ€)\r\n\r\n\r\n#devtools::install_github(\"MiriamLL/sula\")\r\nlibrary(sula)\r\nData<-(GPS_raw)\r\n\r\n\r\n\r\nYou can use the structure of the data to organize your data similarly. It also works with csv data (if you have excel data you can also save it as csv data an import it to R)\r\nTransform to spatial.\r\nYou can use the package sp to transform your data frame to spatial data (in this case you end up with SpatialPointsDataFrame). This way you can tell R that you have coordinates. If you dont have the package sp you need to install it.\r\n\r\n\r\n#install.packages('sp')\r\nlibrary(sp)\r\nDataSp<-as.data.frame(Data)\r\ncoordinates(DataSp) <- c(\"Longitude\", \"Latitude\")\r\nclass(DataSp)\r\n\r\n\r\n[1] \"SpatialPointsDataFrame\"\r\nattr(,\"package\")\r\n[1] \"sp\"\r\n\r\nKernel adehabitat\r\nIf you dont have the package adehabitat you have to install it. I strongly encourage you to read the vignette, here is the link..\r\n\r\n\r\n#install.packages('adehabitatHR')\r\nlibrary(adehabitatHR)\r\nDataUD<-kernelUD(DataSp[,3],h='href') #3 is for the ID  #Here I am using the reference h value\r\nimage(DataUD)\r\n\r\n\r\n\r\n\r\nNow you have a object class estUDm as a result.\r\n\r\n\r\nclass(DataUD)\r\n\r\n\r\n[1] \"estUDm\"\r\n\r\nThe function getvertices calculates the polygon. You can adjust the percent, here I stated 95%.\r\n\r\n\r\nDataUD_pol <- getverticeshr(DataUD, percent = 95, unout = c(\"m2\"))\r\n\r\n\r\n\r\nOne individual\r\nYou can select the data from one individual to create individual UDs.\r\n\r\n\r\nGPS01<-subset(Data,Data$IDs=='GPS01')\r\n\r\n\r\n\r\nAs before, you transform the data frame to SpatialPointsDataFrame and calculate the kernels using the reference value.\r\n\r\n\r\nhead(GPS01)\r\n\r\n\r\n   Latitude Longitude    DateGMT  TimeGMT   IDs\r\n1 -27.20097 -109.4531 02/11/2017 17:05:30 GPS01\r\n2 -27.20084 -109.4531 02/11/2017 17:09:35 GPS01\r\n3 -27.20053 -109.4529 02/11/2017 17:13:50 GPS01\r\n4 -27.20092 -109.4531 02/11/2017 17:17:59 GPS01\r\n5 -27.20065 -109.4529 02/11/2017 17:22:13 GPS01\r\n6 -27.20061 -109.4528 02/11/2017 17:26:25 GPS01\r\n\r\nGPS01Sp<-as.data.frame(GPS01)\r\ncoordinates(GPS01Sp) <- c(\"Longitude\", \"Latitude\")\r\nproj4string(GPS01Sp) <- CRS(\"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs\")\r\nGPS01UD=kernelUD(GPS01Sp,h=\"href\") # Using reference\r\nGPS01UD\r\n\r\n\r\n********** Utilization distribution of an Animal ************\r\n\r\nType: probability density\r\nSmoothing parameter estimated with a  href parameter\r\nThis object inherits from the class SpatialPixelsDataFrame.\r\nSee estUD-class for more information\r\n\r\nYou can check the h value used with the following line. This is important because it can be adjusted and you should state it while describing your methods.\r\n\r\n\r\nGPS01UD@h\r\n\r\n\r\n$h\r\n[1] 0.02096601\r\n\r\n$meth\r\n[1] \"href\"\r\n\r\nThe most common home ranges calculations are the 50% and the 95% areas. Here are some lines to obtain those polygons.\r\n\r\n\r\nGPS01UD95HR<-getverticeshr(GPS01UD,percent=95)\r\nGPS01UD50HR<-getverticeshr(GPS01UD,percent=50)\r\n\r\n\r\n\r\nHere you can check on you polygons visually.\r\n\r\n\r\nplot(GPS01UD95HR, col='yellow')\r\nplot(GPS01UD50HR, col='green', add=TRUE)\r\n\r\n\r\n\r\n\r\nExport\r\nI advice to first identify which folder do you want to use to save your polygons. I have an Rproject and I have created a folder named GIS where I want my polygons to be.\r\n\r\n\r\nlibrary(here)\r\nhere()\r\nGISFolder<-paste0(here())\r\n\r\n\r\n\r\nThere are many ways to export your polygons.\r\nOne is using the package rgdal which comes from Geospatial Data Abstraction Library.\r\n\r\n\r\n#install.packageS('rdgal')\r\nlibrary(rgdal)\r\nwriteOGR(GPS01UD95HR, dsn = GISFolder, layer = 'GPS01HR95', driver = \"ESRI Shapefile\")\r\n\r\n\r\n\r\nThe other way to export your polygons is using the package sf. However, to be able to export your polygons, they should be transform to a sf object.\r\n\r\n\r\nlibrary(sf)\r\nclass(GPS01UD95HR)\r\nGPS01SF95<-st_as_sf(GPS01UD95HR)\r\nst_write(GPS01SF95, paste0(here(), \"/\", \"GPS01SF95.shp\"))\r\n\r\n\r\n\r\nâ€¦ and thats it.\r\nHopefully now you have your shapefiles that can be open in any GIS software such as QGIS.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-09-24-home-range-adehabitathr/blog1.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/bls7/",
    "title": "BLS7",
    "description": "Diel foraging behaviour of Humboldt penguins *Spheniscus humboldti* at Tilgo Island, Northern Chile.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-09-23",
    "categories": [
      "Seabird",
      "presentation",
      "English"
    ],
    "contents": "\r\nIntro\r\nThis post is dedicated to the poster and presentation for the Bio-Logging Symposium (https://www.bls7hawaii.com)\r\nDiel foraging behaviour of Humboldt penguins Spheniscus humboldti at Tilgo Island, Northern Chile\r\nâš¡âš¡âš¡âš¡\r\n\r\n Preview poster\r\n\r\nâš¡âš¡âš¡âš¡\r\nAuthors\r\nMiriam Lerma1, Camila P. Villavicencio2, Nicolas Luna3, MatÃ­as Portflitt-Toro3, Juan Serratosa3,4, Guillermo Luna-Jorquera3, Stefan Garthe1, Rene Quispe5,6\r\nResearch and Technology Center (FTZ), University of Kiel, HafentÃ¶rn 1, 25761 BÃ¼sum, Germany. Link\r\nInstituto de EcologÃ­a y Biodiversidad, Departamento de Ciencias EcolÃ³gicas, Universidad de Chile, Las Palmeras 3425, Ã‘uÃ±oa, Santiago, Chile. Link\r\nMillennium Nucleus for Ecology and Sustainable Management of Oceanic Islands - ESMOI, Larrondo 1281, Coquimbo, Chile. Link\r\nBirdLife International, The David Attenborough Building, Pembroke Street, Cambridge, CB2 3QZ, UK\r\nDepartamento de BiologÃ­a Marina, Facultad de Ciencias del Mar, Universidad CatÃ³lica del Norte, Larrondo 1281, Coquimbo, Chile. Link\r\nFacultad de Ciencias Agropecuarias, Universidad Pedro de Valdivia, Av. Cuatro Esquinas 60, La Serena, Chile\r\nReferences\r\nDe La Puente, S., Bussalleu, A., CardeÃ±a, M., ValdÃ©s-VelÃ¡squez, A., Majluf, P. & Simeone, A. 2020. Humboldt Penguin (Spheniscus humboldti). Birds of the World 269â€“287. Link\r\nVianna, J. A. Cortes M., Ramos, B., Sallaberry, N., GonzÃ¡lez-AcuÃ±a, D.,Dantas, G.P.M., Morgante, J., Simeone, A., Luna-Jorquera, G. Changes in abudance and distribution of Humboldt penguin Spheniscus humboldti. Mar.Â Ornithol. 42: 153-159. Link\r\nDantas, G.P.M., Oliveira, L.R., Santos, A.M., Flores, M.D., De Melo, D.R., Simeone, A., GonzÃ¡lez-AcuÃ±a, D., Luna-Jorquera, G., Le Bohec, C., ValdÃ©s-VelÃ¡squez, A., CardeÃ±a, M., Morgante, J.S. & Vianna, J.A. 2019. Uncovering population structure in the Humboldt penguin (Spheniscus humboldti) along the Pacific coast at South America. PLoS One 14: 1â€“19. Link\r\nQuispe, R., Lerma, M., Serratosa, J. & Luna-Jorquera, G. 2020. Foraging ranges of Humboldt penguins Spheniscus humboldti from Tilgo Island: the critical need for protecting a unique marine habitat. Mar.Â Ornithol. 48: 205â€“208. Link\r\nNavigation route of proposed industrial project at Tilgo Island by Oceana\r\nHerling, C., Culik, B.M. & Hennicke, J.C. 2005. Diet of the Humboldt penguin (Spheniscus humboldti) in northern and southern Chile. Mar.Â Biol. 147: 13â€“25. Link\r\nKaltenberg, A.M. & Benoit-Bird, K.J. 2009. Diel behavior of sardine and anchovy schools in the California Current System. Mar.Â Ecol. Prog. Ser. 394: 247â€“262. Link\r\nTaylor, J.C., Rand, P.S. & Jenkins, J. 2007. Swimming behavior of juvenile anchovies (Anchoa spp.) in an episodically hypoxic estuary: implications for individual energetics and trophic dynamics. Mar.Â Biol. 152: 939â€“957. Link\r\nHumboldt penguin call by Carlos Pinto xeno-canto\r\nAcknowledgments\r\nThis study was financed by Fondecyt (grant no. 3170936 to RQ and postdoctorate grant no. 3160679 to CPV) and by CONACyT-INAPI (grant no. 411876 to ML).\r\nWe thank Esther Rickert for the transportation of tracking devices, and Henri KrÃ¶ling for useful discussions.\r\nThis study was carried out in accordance with the recommendations and permit of the Subsecretaria de Pesca y Acuicultura de Chile (resolution NÂ°3367/2017).\r\n\r\n\r\n\r\n",
    "preview": "posts/bls7/Penguin2.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-07-05-GIScolores/",
    "title": "Colores en mapas",
    "description": "Cambiar colores en un en un mapa en ggplot2 y en QGIS.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-07-05",
    "categories": [
      "QGIS",
      "R",
      "spatial",
      "EspaÃ±ol"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nMapa ğŸŒ\r\nDescargar datos\r\nMapa base\r\nAgregar un sitio\r\nAgregar varios sitios\r\n\r\nQGIS ğŸ—ºï¸\r\n\r\nIntro\r\n\r\n\r\n\r\nEste post es acerca de como crear un mapa base de MÃ©xico, incluir puntos para sitios de muestreo y cambiar los colores de puntos en un mapa en ggplot y en QGIS.\r\nMapa ğŸŒ\r\nPara crear y modificar mapas siguiendo las instrucciones de este post necesitamos los siguientes paquetes:\r\n\r\n\r\nlibrary(raster)\r\nlibrary(sf)\r\nlibrary(ggplot2)\r\nlibrary(ggspatial)\r\n\r\n\r\n\r\nSi no los tienes instalados usa la funciÃ³n install.packages()\r\nExisten shapefiles disponibles para MÃ©xico que se pueden descargar directamente en R.  - Para descargar los shapefiles, el paquete raster cuenta con la funciÃ³n getData. \r\nPara crear un mapa:  - El paquete sf es la que utilizaremos para el manejo de los shapefiles.  - El paqueteggplot2 es crear las visualizaciones. - El paquete ggspatial para agregar la escala.\r\nDescargar datos\r\nLo primero seria descargar los datos usando la funciÃ³n getData.  Una vez cargados los datos, podemos hacer una selecciÃ³n de los estados que nos interesen. \r\n\r\n\r\nMexico<- getData('GADM', country='Mexico', level=1) %>% st_as_sf()\r\nQueretaro <- Mexico[Mexico$NAME_1 == \"QuerÃ©taro\",]\r\nGuanajuato <- Mexico[Mexico$NAME_1 == \"Guanajuato\",]\r\n\r\n\r\n\r\nMapa base\r\nPara crear un mapa centrado en estos estados se puede usar el siguiente cÃ³digo:\r\n\r\n\r\nMapaBase<-ggplot()+\r\n  geom_sf(data= Mexico, fill='#264653', col='black')+\r\n  geom_sf(data= Queretaro, fill='#2a9d8f')+ #para resaltar estados\r\n  geom_sf(data= Guanajuato, fill='#2a9d8f')+ #para resaltar estados\r\n  \r\n  annotation_north_arrow(location=\"tr\",which_north=\"true\",style=north_arrow_fancy_orienteering ())+ #Norte\r\n  ggspatial::annotation_scale(location = \"bl\",bar_cols = c(\"grey60\", \"white\"))+ #Escala\r\n\r\n  theme_bw()+\r\n  coord_sf(xlim = c(-105,-95), #limites del mapa\r\n           ylim = c(18 ,24), #limites del mapa\r\n           expand = FALSE)\r\nMapaBase\r\n\r\n\r\n\r\n\r\nDentro de geom_sf el argumento fill es el color con el que se rellenaran los polÃ­gonos, lo puedes cambiar a como mÃ¡s te guste. En el mapa use cÃ³digos hexa-nÃºmericos que pueden ser encontrados en coolors, para mÃ¡s instrucciones ve aquÃ­\r\nAgregar un sitio\r\nAhora para agregar sitios, se deben especificar las coordenadas. En el ejemplo el argumento geom_point x y y son las coordenadas. En color elegÃ­ el color que le quiero dar a ese punto y lo escribÃ­ como cÃ³digo hexa-nÃºmerico (hex).\r\n\r\n\r\nMapaSitios<-MapaBase+geom_point(aes(x=-100, y=21, \r\n                                    color='#e63946'))+ #elegir el color\r\n  theme(legend.position='none') #evitar la etiqueta\r\nMapaSitios\r\n\r\n\r\n\r\n\r\nAgregar varios sitios\r\nOtra opciÃ³n es que si tienes muchos puntos, es mÃ¡s prÃ¡ctico crear o cargar un data frame.\r\n\r\n\r\nDatosInventados<-data.frame(long=c(-102,-101,-100,-99,-98),\r\n           lat=c(21.5,21.3,20.9,21,20))\r\n\r\n\r\n\r\nPuedes concatenar varios cÃ³digos hex y crear tu propia paleta\r\n\r\n\r\npaleta<-c(\"#f8ffe5\",\"#06d6a0\",\"#1b9aaa\",\"#ef476f\",\"#ffc43d\")\r\n\r\n\r\n\r\nAgregar la paleta a las especificaciones del grÃ¡fico es dentro de geom_point, en color. Para hacer los puntos mÃ¡s grandes tambiÃ©n puedes agregar el argumento size en geom_point\r\n\r\n\r\nMapaSitios<-MapaBase+\r\n  geom_point(data=DatosInventados,aes(x=long, y=lat,color=paleta),size=3)+ \r\n  theme(legend.position='none') #evitar la etiqueta\r\nMapaSitios\r\n\r\n\r\n\r\n\r\nPara exportar el mapa, ve aquÃ­\r\nQGIS ğŸ—ºï¸\r\nAhora, para cambiar colores en QGIS.\r\nPrimero asumirÃ© que tienes cargados tus datos en QGIS. Una vez cargados los datos, elige la capa, y ve a propiedades o properties.\r\n\r\n\r\n\r\n\r\n\r\n\r\nAhora dale click en symbology. En la parte superior elige categorized, elige en value la columna de los nombres de los sitios o algo que los distinga entre si.\r\n\r\n\r\n\r\nDale enter al botÃ³n de classify. Dale Ok.\r\n\r\n\r\n\r\nAhora debes tener la opciÃ³n de cambiar los colores de cada punto.\r\nDale click izquierdo y elige Edit symbol.\r\n\r\n\r\n\r\nAhora puedes darle doble click en el color y en la parte que dice html notation cambiarle el cÃ³digo hexagecimal por el que te interesa, puedes buscarlo en coolors.\r\n\r\n\r\n\r\nY listo!\r\n\r\nğŸ¥³\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-05-GIScolores/blog2.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-06-03-paquetes/",
    "title": "Paquetes",
    "description": "Como crear tu primer paquete con datos y algunas funciones.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-06-03",
    "categories": [
      "R",
      "funciones",
      "EspaÃ±ol"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\n1.1. Nombrar el paquete âœï¸\r\n1.2. Iniciar un paquete ğŸ‘©ğŸ½â€ğŸ”§ï¸\r\n1.3. Archivos ğŸ“„ğŸ“‚ï¸\r\n1.4. Git & Github ğŸ±ğŸ™\r\n1.4. devtools â³\r\n1.5. Licencia ğŸ“‹\r\n1.6. metadata â˜ï¸\r\n1.7. README ğŸ—ï¸\r\n\r\n2. Datos ğŸ’¾\r\n2.1. Documentar datos\r\n2.2. Resumido\r\n\r\n3. FunciÃ³nes ğŸ¤¸ğŸ¾â€\r\n3.1. FunciÃ³n sin dependencias\r\n3.2. Funciones con dependencia\r\n3.3. Otros problemas ğŸ‘»\r\n3.4. Resumido\r\n\r\nOtros\r\n4.1 Warnings âš ï¸\r\n4.2. Crear tu propio sticker â£ï¸\r\n4.3. Zenodo ğŸ”—\r\n\r\nCrÃ©ditos y recursos ğŸ‘©ğŸ½â€ğŸ«\r\n\r\nIntro\r\n\r\n\r\n\r\nPara crear un paquete principalmente hay que saber crear funciones.\r\nPero Â¿Porque crear un paquete? ğŸ¤”\r\nAlgunas razones: \r\nRepito pasos y anÃ¡lisis con datos similares, hasta ahora re-uso funciones de scripts anteriores. \r\nEstudiantes y colegas me preguntan como realizar anÃ¡lisis similares, pero no estÃ¡n familiarizados con la sintaxis de las funciones \r\nLos artÃ­culos me piden mÃ¡s detalles de como se realizaron los anÃ¡lisis y el espacio es limitado para dar detalles.\r\nAunque existan paquetes similares no cubren todos los pasos, sirven de inspiraciÃ³n pero no resuelven el problema.\r\n1.1. Nombrar el paquete âœï¸\r\nPara crear paquetes se puede usar el paquete usethis\r\n\r\n\r\n#install.packages('usethis')\r\nlibrary(usethis)\r\n\r\n\r\n\r\nAntes de iniciar a crear un paquete, se puede consultar si el nombre no esta siendo usando en otro paquete en la pÃ¡gina CRAN. TambiÃ©n existe el paquete available para revisar si el paquete ya existe en CRAN o en github y si el nombre del paquete puede ser ofensivo.\r\n\r\n\r\ninstall.packages('available')\r\nlibrary(available)\r\navailable(\"nombre_paquete\")\r\n\r\n\r\n\r\nTe va preguntar si quieres que revise por contenido ofensivo, puedes poner Y.\r\n\r\nUrban Dictionary can contain potentially offensive results,\r\n  should they be included? [Y]es / [N]o:\r\n\r\nDespuÃ©s abre paginas para mostrar que significa el nombre de el paquete.\r\n1.2. Iniciar un paquete ğŸ‘©ğŸ½â€ğŸ”§ï¸\r\nPara crear un paquete la funciÃ³n create_package crea el esqueleto de los paquetes.  Dentro puedes poner el nombre del paquete que te interesa crear.\r\n\r\n\r\nusethis::create_package(\"nombre_paquete\")\r\n\r\n\r\n\r\nAparecerÃ¡ algo asÃ­:\r\n\r\nâˆš Creating 'nombre_paquete/'\r\nâˆš Setting active project to '...'\r\nâˆš Creating 'R/'\r\nâˆš Writing 'DESCRIPTION'\r\nPackage: nombre_paquete\r\nTitle: What the Package Does (One Line, Title Case)\r\nVersion: 0.0.0.9000\r\nAuthors@R (parsed):\r\n    * First Last <first.last@example.com> [aut, cre] (YOUR-ORCID-ID)\r\nDescription: What the package does (one paragraph).\r\nLicense: `use_mit_license()`, `use_gpl3_license()` or friends to\r\n    pick a license\r\nEncoding: UTF-8\r\nLazyData: true\r\nRoxygen: list(markdown = TRUE)\r\nRoxygenNote: 7.1.1\r\nâˆš Writing 'NAMESPACE'\r\nâˆš Writing 'nombre_paquete.Rproj'\r\nâˆš Adding '^nombre_paquete\\\\.Rproj$' to '.Rbuildignore'\r\nâˆš Adding '.Rproj.user' to '.gitignore'\r\nâˆš Adding '^\\\\.Rproj\\\\.user$' to '.Rbuildignore'\r\nâˆš Opening '...' in new RStudio session\r\nâˆš Setting active project to '<no active project>'\r\n\r\nNota: Si te encuentras dentro de un proyecto va a preguntar si deseas sobregrabar el proyecto existente. Si es el caso: 2: Absolutely\r\n\r\nv Writing 'NAMESPACE'\r\nOverwrite pre-existing file 'nombre_paquete.Rproj'?\r\n\r\n1: Not now\r\n2: Absolutely\r\n3: No way\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nv Writing 'nombre_paquete.Rproj'\r\nv Adding '^nombre_paquete\\\\.Rproj$' to '.Rbuildignore'\r\nv Adding '^\\\\.Rproj\\\\.user$' to '.Rbuildignore'\r\nv Opening '...' in new RStudio session\r\nv Setting active project to '<no active project>'\r\n\r\nSe abrirÃ¡ el proyecto en otra ventana.\r\n1.3. Archivos ğŸ“„ğŸ“‚ï¸\r\nLa funciÃ³n anterior creÃ³ los archivos:\r\n- .gitignore  - .Rbuildignore - DESCRIPTION - NAMESPACE - README.md\r\nLas Carpetas: - R\r\n1.4. Git & Github ğŸ±ğŸ™\r\nSi ya tienes instalado git puedes directamente conectar el paquete con tu repositorio, escribiendo en tu consola:\r\n\r\n\r\nusethis::use_git()\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Setting active project to '...'\r\nâˆš Adding '.Rdata', '.httr-oauth', '.DS_Store' to '.gitignore'\r\nThere are 6 uncommitted files:\r\n '.gitignore'\r\n '.Rbuildignore'\r\n 'DESCRIPTION'\r\n 'NAMESPACE'\r\nIs it ok to commit them?\r\n\r\n1: Absolutely not\r\n2: Yup\r\n3: Negative\r\n\r\n3: Yupâ€¦ es si\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Adding files\r\nâˆš Making a commit with message 'Initial commit\r\n A restart of RStudio is required to activate the Git pane\r\nRestart now?\r\n1: Yup\r\n2: No\r\n3: Not now\r\n\r\nSi deseas reiniciar RStudio para activar git:\r\n1: Yupâ€¦ es sip\r\nSe reiniciara la sesiÃ³n\r\nPara ahora conectarlo con github, hay que escribir en la consola:\r\n\r\n\r\nusethis::use_github()\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\ni Defaulting to https Git protocol\r\nâˆš Setting active project to 'C:/...'\r\nâˆš Checking that current branch is default branch ('master')\r\nâˆš Creating GitHub repository '...'\r\nâˆš Setting remote 'origin' to 'https://github.com/...git'\r\nâˆš Setting URL field in DESCRIPTION to 'https://github.com/...'\r\nâˆš Setting BugReports field in DESCRIPTION to 'https://github.com/...'\r\nThere is 1 uncommitted file:\r\n 'DESCRIPTION'\r\nIs it ok to commit it?\r\n1: No\r\n2: No way\r\n3: I agree\r\n\r\nSi es correcto elegir 3: I agree, que significa de acuerdo\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Adding files\r\nâˆš Making a commit with message 'Add GitHub links to DESCRIPTION'\r\nâˆš Pushing 'master' branch to GitHub and setting 'origin/master' as upstream branch\r\nâˆš Opening URL 'https://github.com/...'\r\n\r\nAbrirÃ¡ github\r\n1.4. devtools â³\r\nEscribir en la consola\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nEsta funciÃ³n revisa la versiÃ³n, plataforma, sesiones y demÃ¡s.\r\nTarda un poquito.\r\n\r\n0 errors âˆš | 1 warning x | 0 notes âˆš\r\n\r\nEl warning ocurre porque hay que darle una licencia al paquete.\r\n\r\nNon-standard license specification:\r\n    `use_mit_license()`, `use_gpl3_license()` or friends to pick a\r\n    license\r\n  Standardizable: FALSE\r\n\r\n1.5. Licencia ğŸ“‹\r\nPara software la licencia mÃ¡s comÃºn es MIT\r\n\r\n\r\nusethis::use_mit_license(\"Mi Nombre\")\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Setting License field in DESCRIPTION to 'MIT + file LICENSE'\r\nâˆš Writing 'LICENSE'\r\nâˆš Writing 'LICENSE.md'\r\nâˆš Adding '^LICENSE\\\\.md$' to '.Rbuildignore'\r\n\r\nPara revisar si funcionÃ³:\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nTarda un poquito.\r\n\r\n0 errors âˆš | 0 warning âˆš | 0 notes âˆš\r\n\r\n1.6. metadata â˜ï¸\r\nPara agregar metadata se debe abrir y modificar el documento que dice DESCRIPTION, agregando tus datos.\r\nEsta es la informaciÃ³n de contacto si hay problemas con el paquete.\r\n\r\n\r\nAuthors@R:\r\n  person(given = \"Miriam\",\r\n         family = \"Lerma\",\r\n         role = c(\"aut\", \"cre\"),\r\n         email = \"miriamjlerma@gmail.com\",\r\n         comment = c(ORCID = \"0000-0002-7632-9289\"))\r\n\r\n\r\n\r\n1.7. README ğŸ—ï¸\r\nPara crear un nuevo README, el paquete usethis tiene una funciÃ³n para crearlo de manera automÃ¡tica,\r\n\r\n\r\nlibrary(usethis)\r\nuse_readme_rmd(open = rlang::is_interactive())\r\n\r\n\r\n\r\n\r\nâˆš Setting active project to '...'\r\nâˆš Writing 'README.Rmd'\r\nâˆš Adding '^README\\\\.Rmd$' to '.Rbuildignore'\r\n Modify 'README.Rmd'\r\nâˆš Writing '.git/hooks/pre-commit'\r\n\r\n2. Datos ğŸ’¾\r\nPara agregar datos en tu paquete, puedes cargar tus datos y despuÃ©s guardarlos dentro de tu proyecto. \r\n\r\n\r\n\r\nPor convenciÃ³n los datos son colocados en una carpeta que lleve el nombre de data dentro del paquete.  Puedes crear esta carpeta desde RStudio abriendo la pestaÃ±a de Files y eligiendo New Folder. \r\nPara comprimir datos pesados puedes guardarlos como .rda.\r\n\r\n\r\nsave(TDR_raw, file=\"TDR_raw.rda\")\r\n\r\n\r\n\r\nPara revisar el peso de los datos puedes usar:\r\n\r\n\r\nobject.size(TDR_raw)\r\n\r\n\r\n\r\n\r\n\r\npryr::mem_used()\r\n\r\n\r\n\r\n2.1. Documentar datos\r\nPara documentar tus datos, puedes abrir un nuevo script (File>NewFile>R Script) o usar la funciÃ³n del paquete usethis.\r\nTanto la funciÃ³n use_r como use_data funcionan.\r\n\r\n\r\nusethis::use_r(\"mis_datos\")\r\nusethis::use_data(\"mis_datos\")\r\n\r\n\r\n\r\nEsta funciÃ³n agrega comentarios Roxigen y guarda el documento en tu folder llamado R.  En mi caso yo le di al script el mismo nombre que a los datos.\r\n\r\n\r\n#' Mis datos son datos de...\r\n#' Contiene 264197 obs de 1 variable.\r\n#' @docType data\r\n#' @usage data(mis_datos)\r\n#' @format Un data frame con 1 variable\r\n#' @keywords datasets\r\n#' @references Lerma et al. 2021\r\n#' @examples\r\n#' data(mis_datos)\r\n\"mis_datos\"\r\n\r\n\r\n\r\nUna vez creado el archivo .rda y .R se puede revisar si funcionÃ³ usando funciones del paquete devtools\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nSi los datos son muy pesados y te aparece un mensaje como este:\r\n\r\nNote: significantly better compression could be obtained\r\n          by using R CMD build --resave-data\r\n\r\nEs mejor agregar el argumento compress.\r\n\r\n\r\nsave(TDR_raw, file=\"TDR_raw.rda\", compress = \"xz\")\r\n\r\n\r\n\r\n2.2. Resumido\r\nAgrega datos al paquete\r\n\r\n\r\nsave(mis_datos, file=\"mis_datos.rda\")\r\n\r\n# Tu objeto, tu documento rda y tu R deben tener el mismo nombre. \r\n\r\nusethis::use_r(\"mis_datos\")\r\n\r\n#Insertar Roxigen Skeleton  (CTRL+ALT+SHIFT+R) o copiar y pegar de otro archivo\r\n\r\ndevtools::document()\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nSi despuÃ©s de usar devtools::check(), aparece:\r\n\r\n0 errors âˆš | 0 warnings âˆš | 0 notes âˆš\r\n\r\nYa tienes tu primer paquete con datos ğŸ¥³.\r\nPara instalar el paquete de manera local\r\n\r\n\r\ndevtools::install(\"C:/....\")\r\n\r\n\r\n\r\nPara instalar el paquete desde github\r\n\r\n\r\ndevtools::install_github(\"Desarrollador/paquete\")\r\n\r\n\r\n\r\n3. FunciÃ³nes ğŸ¤¸ğŸ¾â€\r\nPara este paso deberÃ­as tener alguna funciÃ³n en mente.\r\nSi aÃºn no sabes como crear tu primera funciÃ³n puedes ir a r4ds.\r\nLa estructura es algo asÃ­:\r\n\r\n\r\nnombre_de_la_funcion<-function(argumentos){\r\n  algo_que_haga_la_funcion_usando(argumentos)\r\n  return(resultado)\r\n}\r\n\r\n\r\n\r\n3.1. FunciÃ³n sin dependencias\r\nPara agregar la funciÃ³n al paquete.\r\n\r\n\r\nusethis::use_r(\"mi_primera_funcion\")\r\n\r\n\r\n\r\nAbre un nuevo script\r\nPega allÃ­ la funciÃ³n\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Setting active project to 'C:/...'\r\n Modify 'R/mi_primera_funcion.R'\r\n Call `use_test()` to create a matching test file\r\n\r\nAhora en la carpeta R aparecerÃ¡ dentro la funciÃ³n\r\nAgregar un Roxigen skeleton:  - Poner el cursor justo en la primera linea de la funciÃ³n.  - Abrir la pestaÃ±a de Code>Insert Reoxygen Skeleton (tambiÃ©n funciona con Control+Alt+Shift+R). \r\nAparecerÃ¡ algo como:\r\n\r\n\r\n#' Title\r\n#'\r\n#' @param data \r\n#' @param trip_start \r\n#' @param trip_end \r\n#'\r\n#' @return\r\n#' @export\r\n#'\r\n#' @examples\r\n\r\n\r\n\r\nDespuÃ©s de rellenar la informaciÃ³n necesaria, para agregar la funciÃ³n al paquete, escribe en la consola:\r\n\r\n\r\ndevtools::document()\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nWriting NAMESPACE\r\nWriting mi_primera_funcion.Rd\r\n\r\nAl abrir la carpeta man aparecerÃ¡ un documento rellenado.\r\nEl nombre man viene de manual y esta es la documentaciÃ³n del paquete.\r\nNo debe ser editado de manera manual.\r\nYa puedes revisar la documentaciÃ³n.\r\n\r\n\r\n?mi_primera_funcion\r\n\r\n\r\n\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\n3.2. Funciones con dependencia\r\nTe recomiendo probar tu funciÃ³n con datos de ejemplo, antes de incluirla en el paquete.\r\nRevisa que paquetes son requeridos, por ejemplo: tidyr\r\n\r\n\r\n\r\nDefine los argumentos por separado como objeto.\r\n\r\n\r\ndata=misdatos\r\nmi_primer_argumento='mi_primer_argumento'\r\nmi_segundo_argumento='mi_segundo_argumento'\r\n\r\n\r\n\r\nPrueba la funciÃ³n\r\n\r\n\r\nmi_funcion(data = mis_datos,\r\n           mi_primer_argumento='mi_primer_argumento',\r\n           mi_segundo_argumento='mi_segundo_argumento')\r\n\r\n\r\n\r\nOtra opciÃ³n es usar el paquete â€˜testthatâ€™ para probar tu funciÃ³n.\r\nPara agregar la funciÃ³n al paquete:\r\n\r\n\r\nusethis::use_r(\"tu_funcion\")\r\n\r\n\r\n\r\nAbre un nuevo script. Pega allÃ­ la funciÃ³n. En la consola aparecerÃ¡ algo como:\r\n\r\n Modify 'R/tu_funcion.R'\r\n Call `use_test()` to create a matching test file\r\n\r\nAhora en la carpeta R dentro del paquete aparece la funciÃ³n.Nota sugiere que uses use_test pero puede en conflicto con el siguiente paso.\r\nPuedes usar /rm() para quitar tu funciÃ³n.\r\nPara poner la funciÃ³n en la memoria local y confirmar que se ejecute hay que incluirla en el paquete y probarla.\r\n\r\n\r\ndevtools::load_all()\r\n\r\n\r\n\r\nPara documentar la funciÃ³n hay que crear un Roxigen skeleton.\r\nPara esto se debe poner el cursor justo en la primera linea de la funciÃ³n.\r\nDespuÃ©s ir a la pestaÃ±a de Code>Insert Reoxygen Skeleton (tambÃ­en funciona con Control+Alt+Shift+R).\r\nVa a aparecer algo asÃ­:\r\n\r\n\r\n#' Title\r\n#'\r\n#' @param data \r\n#' @param mi_primer_argumento \r\n#' @param mi_segundo_argumento \r\n#'\r\n#' @return\r\n#' @export\r\n#'\r\n#' @examples\r\n\r\n\r\n\r\nNota que identifica de manera automÃ¡tica las variables de la funciÃ³n\r\nAhora que ya esta la funciÃ³n y la documentaciÃ³n para agregar el paquete hay que escribir en la consola:\r\n\r\n\r\ndevtools::document()\r\n\r\n\r\n\r\nAparece:\r\n\r\nWriting NAMESPACE\r\nWriting mi_funcion.Rd\r\n\r\nAhora en la carpeta man, aparece un documento rellenado.man viene de manual y esta es la documentaciÃ³n del paquete.\r\nNota No debe ser editado de manera manual.\r\nPuedes revisar la documentaciÃ³n de la funciÃ³n.\r\n\r\n\r\n?mi_funcion\r\n\r\n\r\n\r\nDependencias son paquetes necesarios para que la funciÃ³n, funcione.\r\nPara revisar si necesitas dependencias se puede usar:\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nSi tu paquete tiene dependencias, aparecerÃ¡n errores, warnings y notas.\r\nPor ejemplo, un paquete que usa: - un %>% (pipe) depende del paquete magrittr, y - la funciÃ³n separate depende del paquete dplyr.\r\nPara agregar las dependencias se puede escribir el nombre de los paquetes dentro de la funciÃ³n use_package\r\n\r\n\r\nusethis::use_package(\"dplyr\")\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Adding 'dplyr' to Imports field in DESCRIPTION\r\n Refer to functions with `dplyr::fun()`\r\n\r\nAsÃ­ mismo aparecerÃ¡ en el documento DESCRIPTION:\r\n\r\n\r\nImports: \r\n    dplyr\r\n\r\n\r\n\r\nLo siguiente es especificar el paquete en la funciÃ³n, tal como recomienda el siguiente mensaje.\r\n\r\n Refer to functions with `dplyr::fun()`\r\n\r\npipe ğŸ–‡ï¸\r\nLa funciÃ³n pipe (%>%) del paquete magrittr es especial.\r\nPor lo que hay que usar:\r\n\r\n\r\nusethis::use_pipe()\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nâˆš Adding 'magrittr' to Imports field in DESCRIPTION\r\nâˆš Writing 'R/utils-pipe.R'\r\n Run `devtools::document()` to update 'NAMESPACE'\r\n\r\nSe recomienda volver a documentar.\r\n\r\n\r\ndevtools::document()\r\n\r\n\r\n\r\nAhora deberÃ¡ aparecer en la carpeta R un script llamado utils-pipe.R y\r\nen el archivo DESCRIPTION deberÃ¡ aparecer Imports magrittr\r\nPara checar el paquete:\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\n\r\n0 errors âˆš | 0 warnings âˆš | 0 notes âˆš\r\n\r\nListo! el paquete esta completo ğŸ¥³\r\nstats ğŸ§®\r\nCuando queremos agregar alguna funciÃ³n que incluya cÃ¡lculos de desviaciÃ³n estÃ¡ndar, aunque no se necesite cargar el paquete en RStudio, la funciÃ³n proviene de un paquete.\r\nEl paquete es stats\r\nPor lo tanto el paquete stats debe ser incluido en las dependencias.\r\n\r\n\r\nusethis::use_package(\"stats\")\r\n\r\n\r\n\r\nY agregado a la funciÃ³n.\r\n\r\n\r\nresultado<- data %>%\r\n    dplyr::summarise(max_depth_mean=mean(.data[[var1]]),\r\n                     max_depth_sd=stats::sd(.data[[var1]]),\r\n                     max_depth_max=max(.data[[var1]]))\r\n\r\n\r\n\r\n\r\n\r\ndevtools::document()\r\ndevtools::check()\r\n\r\n\r\n\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\n\r\n0 errors âˆš | 0 warnings âˆš | 0 notes âˆš\r\n\r\nListo! el paquete esta completo ğŸ¥³\r\nggplot ğŸ¨\r\nCuando creamos una funciÃ³n con ggplot hay que declarar el uso de la funciÃ³n en varios argumentos de la funciÃ³n. AquÃ­ puedes leer mÃ¡s.\r\nSi no, aparecerÃ¡ un error:\r\n\r\n1 error x | 0 warnings âˆš | 1 note x\r\n\r\nEsto occurre debido a que al revisar el paquete, no detecta varias funciones del paquete ggplot.\r\n\r\nno visible global function definition for 'aes'\r\n\r\nEjemplo:\r\n\r\n\r\nggplot2::ggplot(data=data,ggplot2::aes(x=.data[[var1]],\r\n                              y=as.numeric(.data[[var2]])))+\r\n    ggplot2::geom_line()+\r\n    ggplot2::ylab(\"Diving depth (m)\")+\r\n    ggplot2::xlab(\"Month.Day Hour:Minute\")+\r\n    ggplot2::scale_y_reverse()+\r\n    ggplot2::theme_bw()\r\n\r\n\r\n\r\n\r\nchecking R code for possible problems ...\r\n\r\nTambiÃ©n pueden aparecer problemas con las variables al usar ggplot dentro de una funciÃ³n.\r\n\r\nno visible binding for global variable '.data'\r\n\r\nPara resolver esto hay que declarar las variables dentro de la funciÃ³n y posteriormente usar .data\r\n\r\ndata<-TDR_trip\r\nvar1<-time_column\r\nvar2<-depth_column\r\n  \r\nggplot2::ggplot(data,\r\n                ggplot2::aes(x=.data[[var1]],\r\n                             y=.data[[var2]))+\r\n    ggplot2::geom_line()\r\n\r\n\r\n\r\ndevtools::document()\r\ndevtools::check()\r\n\r\n\r\n\r\n\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\n\r\n0 errors âˆš | 0 warnings âˆš | 0 notes âˆš\r\n\r\nListo! el paquete esta completo ğŸ¥³\r\n3.3. Otros problemas ğŸ‘»\r\nProblema En algunas funciones puedes haber usado assign. Usar assign no es recomendado, por lo que aparecerÃ¡ una nota. SoluciÃ³n Usar return().\r\nProblema No nested functions, no circular dependencies. SoluciÃ³n No puedes usar funciones de tu paquete en otras funciones del mismo paquete. \r\nProblema Borrar funciones.SoluciÃ³n Para borrar funciones se debe borrar el script en el archivo R y volver a documentar el paquete para que se reflejen los cambios.\r\nProblema El ejemplo tiene mÃ¡s de 100 caracteres, es considerado muy largo. SoluciÃ³n Separar en la documentaciÃ³n.\r\n\r\n\\examples lines wider than 100 characters:\r\n\r\nProblema Solo puedo tener un resultado (return) SoluciÃ³n Crea una lista con los returns. Por ejemplo:\r\n\r\nfuncion(primer_argumento, segundo_argumento){\r\n  multiplicacion<-primer_argumento*segundo_argumento\r\n  suma<-primer_argumento+segundo_argumento\r\n  lista<-(list(\"multiplicacion\"=multiplicacion,\"suma\"=suma))\r\n  return(lista)\r\n}\r\n\r\nProblema Al usar slot en sapply.SoluciÃ³n Hay que agregar la dependencia methods.\r\n3.4. Resumido\r\n\r\n\r\nusethis::use_r(\"nombre_funcion\")\r\n\r\n#Insertar Roxigen Skeleton  (CTRL+ALT+SHIFT+R)\r\n\r\ndevtools::document()\r\n\r\ndevtools::check()\r\n\r\nusethis::use_package(\"ggplot2\")\r\n\r\n#Referirse a funciones con ::\r\n\r\ndevtools::check()\r\n\r\n\r\n\r\nOtros\r\n4.1 Warnings âš ï¸\r\nEs Ãºtil agregar warnings para que el usuario (quien sera a veces tu mismo) pueda corregir errores.\r\nPara checar que el data frame contenga datos, revisa que el numero de filas no sea cero.\r\n\r\n\r\n if (nrow(data)!=0){\r\n  } else {\r\n    warning(\"Please check the name of the data frame\")\r\n  }\r\n\r\n\r\n\r\nTambiÃ©n puedes revisar si tu data frame contiene una columna de acuerdo a su nombre\r\n\r\n\r\nif (\"Nombre_columna\" %in% colnames(data)){\r\n  } else {\r\n    warning(\"Please check that your data frame has X column, otherwise please rename/create the column\")\r\n  }\r\n\r\n\r\n\r\nAdemas podemos revisar si una columna en especifico aparece en el data frame\r\n\r\n\r\nif (!is.null(data[[columna]])) {\r\n  } else {\r\n    warning(\"The column X is not in your dataframe. Please check the name of the column\")\r\n  }\r\n\r\n\r\n\r\nï¸\r\n4.2. Crear tu propio sticker â£ï¸\r\nPara crear un hexSticker puedes usar plantillas:  - En powerpoint plantilla hecha por Emi Tanaka  - En R paquete hexSticker hecho por GuangchuangYu\r\nPara instalar el paquete hexSticker, puedes descargarlo desde en CRAN:\r\n\r\n\r\ninstall.packages(\"hexSticker\")\r\n\r\n\r\n\r\n4.3. Zenodo ğŸ”—\r\nZenodo es un repositorio de acceso abierto operado por CERN (OrganizaciÃ³n Europea para la InvestigaciÃ³n Nuclear).\r\nVentajas Permite que se depositen allÃ­ artÃ­culos de investigaciÃ³n, datos, software, informes y otro tipo de objeto digital relacionado con la investigaciÃ³n. La ventaja frente a github es que asigna un DOI.\r\nDesventajas Las versiones de paquetes se pueden registrar en zenodo. No obstante, NO es tan practico ya que cada versiÃ³n tiene su propio DOI y la versiÃ³n anterior no puede ser eliminada.\r\nCrÃ©ditos y recursos ğŸ‘©ğŸ½â€ğŸ«\r\nPaquetes usethis testthat\r\nLibros R Packages\r\nTutoriales sobre datos  Incluir datos  Documentar datos \r\nTu paquete en una hora  Piping hot data\r\nVideos Rladies como crear funciones Rladies como crear paquetes\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-06-03-paquetes/blog3.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-06-03-vitae/",
    "title": "CV",
    "description": "Como crear un curriculo en RStudio usando el paquete vitae.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-06-02",
    "categories": [
      "R",
      "funciones",
      "EspaÃ±ol"
    ],
    "contents": "\r\n\r\nContents\r\nIntro\r\nDescargar el paquete ğŸ•¯ï¸\r\nIniciar con una plantilla ğŸ§¶\r\nTus datos ğŸ’¾\r\nPartes de tu CV ğŸ’­\r\nAgregar tu informaciÃ³n âœï¸\r\nTus publicaciones ğŸ‘©ğŸ½â€ğŸ”¬\r\nHabilidades ğŸ¤¸ğŸ½â€ï¸\r\nColores de las letras ğŸ‘©ğŸ¾â€ğŸ¨\r\nResumiendo âœ”ï¸\r\nCrÃ©ditos y recursos ğŸ‘©ğŸ¾â€ğŸ«\r\n\r\nIntro\r\nPara crear un CV en RStudio, bÃ¡sicamente necesitas saber Rmd.\r\nPara los bÃ¡sicos de Rmd te recomiendo ir aquÃ­.\r\nSi quieres ver como quedo mi cv, puedes descargarlo aquÃ­.\r\nDescargar el paquete ğŸ•¯ï¸\r\nPara crear tu CV puedes descargar el paquete vitae desde github.\r\n\r\n\r\n# install.packages(\"devtools\")\r\ndevtools::install_github(\"mitchelloharawild/vitae\")\r\n\r\n\r\n\r\nPara ver detalles Ã©sta es la pÃ¡gina.\r\nNota Al instalar el paquete se tarda descargando actualizaciones.\r\nIniciar con una plantilla ğŸ§¶\r\nFile>NewFile>R Markdown>From template\r\nPara elegir la plantilla (template), en la pÃ¡gina puedes ver algunos ejemplos.\r\nPero si no te decides, se puede modificar en el output del YAML despuÃ©s.\r\nAl elegir tu plantilla, se abrirÃ¡ un nuevo Rmd. Antes de empezar a rellenar tu CV, te recomiendo probar tener todos las dependencias instaladas. Para esto, dale en knit.\r\nTal vez tengas que instalar de nuevo tinytext.\r\n\r\nError: LaTeX failed to compile Untitled.tex. \r\nSee https://yihui.org/tinytex/r/#debugging for debugging tips.\r\n\r\nPara instalarlo:\r\n\r\n\r\ntinytex::install_tinytex()\r\n\r\n\r\n\r\nTus datos ğŸ’¾\r\nLa informaciÃ³n que incluyas en el YAML aparecerÃ¡ en la parte superior de tu CV.\r\nLa plantilla te da un archivo prellenado, que debes modificar de acuerdo a tus datos.\r\n\r\n---\r\nname: Marie\r\nsurname: Curie\r\nposition: \"Professor\"\r\naddress: \"School of Physics & Chemistry, Ã‰cole Normale SupÃ©rieure\"\r\nphone: +1 22 3333 4444\r\nwww: mariecurie.com\r\nemail: \"Marie.Curie@ens.fr\"\r\ntwitter: mariecurie\r\ngithub: mariecurie\r\nlinkedin: mariecurie\r\ndate: \"`r format(Sys.time(), '%B %Y')`\"\r\noutput: \r\n  vitae::latexcv:\r\n    theme: classic\r\n---\r\n\r\nSi al darle knit te esta causando muchos problemas con LaTex, te recomiendo cambiar el output a awesomecv y poner keep_tex en false.\r\n\r\n\r\noutput: \r\n  vitae::awesomecv:\r\n    keep_tex: false\r\n\r\n\r\n\r\nPartes de tu CV ğŸ’­\r\nDepende para que sea tu CV puedes estructurarlo de manera diferente.\r\nSi quieres un CV acadÃ©mico te puedes basar en la estructura del CV de Han Zhang.\r\nEste CV contiene\r\n- Research interest\r\n- Education\r\n- Peer-reviewed Publications\r\nAgregar tu informaciÃ³n âœï¸\r\nPara agregar las partes a tu CV, la informaciÃ³n se maneja como tribble\r\nUnas de las funciones de vitae es detailed_entries, que es como sera mostrada la informaciÃ³n en tu pdf, otra opciÃ³n es brief_entries que presenta un formato mÃ¡s compacto.\r\nPara llenar un tribble:\r\n\r\n\r\ntribble(\r\n  ~Year, ~Type, ~Desc,\r\n  \"2021-current\", \"Postdoc\", \"Universidad de Kiel\",\r\n  \"2020-2021\",\"Postdoc\",\"Universidad de Kiel\"\r\n) %>% \r\n  detailed_entries(\r\n    glue::glue(\"Trabajos {Type}\"),\r\n    Year, \r\n    Desc\r\n  )\r\n\r\n\r\n\r\nTus publicaciones ğŸ‘©ğŸ½â€ğŸ”¬\r\nPara agregar publicaciones puedes el archivo .bib con tus datos. Si quieres aprender como extraer las citas, te recomiendo mirar aquÃ­\r\n\r\n\r\nlibrary(dplyr)\r\nknitr::write_bib(c(\"vitae\", \"tibble\"), \"papers.bib\")\r\n\r\nbibliography_entries(\"papers.bib\") %>%\r\n  arrange(desc(author$family), issued)\r\n\r\n\r\n\r\nNo obstante, si tus publicaciones incluyen acentos y letras cursivas. Entonces puede ser mÃ¡s practico usar tribble y detailed_entries.\r\nPara agregar letras negritas o cursivas la sintaxis es:\r\n\r\n\\\\textit{} #italicas\r\n\\\\textbf{} #negritas\r\n\r\nEjemplo:\r\n\r\n\r\ntribble(\r\n ~ Year, ~ Place, ~ Project, ~ Position,\r\n\r\n \"2020\",\r\n  \"\\\\textbf{Lerma, M}, Serratosa J, Luna-Jorquera G, Garthe S\",\r\n  \"Foraging ecology of masked boobies \\\\textit{(Sula dactylatra)} in the worldâ€™s largest â€˜oceanic desertâ€™\",\r\n  \"Mar Biol 167: 87\"\r\n \r\n ) %>% \r\n  detailed_entries(Place, \r\n                   Position,\r\n                   Project, \r\n                   Year,\r\n                   .protect = FALSE)\r\n\r\n\r\n\r\nEs importante poner protect en FALSE para que aparezcan los cambios.\r\nHabilidades ğŸ¤¸ğŸ½â€ï¸\r\nPara incluir tus habilidades puede que no quieras tener una lista con mucho espacio vacÃ­o. Una opciÃ³n para evitar esto es crear una tabla parecida a la que aparece en el CV de Lorena Abad.\r\n\r\n\r\nSkills<-tribble(\r\n   ~Computer, ~Laboratory, ~Fieldwork,~ Languages,\r\n  \"R -- Statistica -- SPSS -- Sigmaplot -- QGIS -- Git -- Markdown\",\r\n  \"Heavy metal analyses -- Stable isotopes -- Plasma metabolites analyses\",\r\n  \"Catching and handling wild animals -- Sample collection: extraction blood & feathers -- Censing populations -- Monitoring breeding success\",\r\n  \"Spanish (Mother tongue) -- English (TOEFL iBT 99) -- German (Basic-A2)\"\r\n)\r\n\r\n\r\n\r\n\r\n\r\nSkills %>%\r\n  kbl(booktabs = T, align =\"c\",format = \"latex\") %>% #crea tabla y alinea al centro\r\n  column_spec(column = 1:4, width = '4cm')%>%        #separa las columnas en 4 y las hace de 4 cm\r\n  row_spec(0, bold = T, color = \"#009acd\") %>%       #hace las letras en negrita y cambia el color\r\n  row_spec(1, bold = F, color = \"#7f7f7f\")           #cambia el color del texto a gris\r\n\r\n\r\n\r\nPara que no aparezcan las lineas en la tabla, se puede agregar en el YAML:\r\n\r\n  \\usepackage{colortbl}\r\n  \\arrayrulecolor{white}\r\n\r\nColores de las letras ğŸ‘©ğŸ¾â€ğŸ¨\r\nPara cambiar el color del texto se puede ajustar en el YAML.\r\n\r\nheadcolor: 009ACD\r\n\r\nResumiendo âœ”ï¸\r\nvitae es una buena opciÃ³n para crear tu CV y solo se tiene que hacer la estructura una vez, que ademÃ¡s resulta mas atractiva a la vista. No obstante puede traer muchos errores por LaTex.\r\nCrÃ©ditos y recursos ğŸ‘©ğŸ¾â€ğŸ«\r\n\r\n\r\n\r\nEjemplos LorenaAbad Han Zhang GalerÃ­a\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-06-03-vitae/blog4.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-06-03-paginadistill/",
    "title": "Pagina distill",
    "description": "Como crear tu propia pagina y agregar contenidos.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-06-01",
    "categories": [
      "R",
      "funciones",
      "EspaÃ±ol"
    ],
    "contents": "\r\n\r\nContents\r\nCrear un sitio ğŸ‘©ğŸ½â€ğŸ’»\r\nBarra de navegaciÃ³n â›µ\r\nCrear un post ğŸ“¬\r\nEscribir en el post âœï¸\r\nAgregar cÃ³digo ğŸ‘©ğŸ½â€ğŸ’»\r\nCSS ğŸ‘©ğŸ½â€ğŸ¨\r\nCitas ğŸŒ¹\r\nAgregar botones ğŸ›ï¸\r\nBuild ğŸ”¨\r\nDe Rstudio a online ğŸ‘©ğŸ½â€ğŸš€\r\nCrÃ©ditos y recursos ğŸš€\r\n\r\n\r\nCrear un sitio ğŸ‘©ğŸ½â€ğŸ’»\r\n\r\n\r\n\r\nPara crear una pagina web usando distill, bÃ¡sicamente necesitas saber Rmd.\r\nEmpecemos por instalar el paquete distill.\r\n\r\n\r\n#install.packages(\"distill\")\r\nlibrary(distill)\r\n\r\n\r\n\r\nTienes que preguntarte: Â¿Que tipo de pÃ¡gina quieres hacer? Â¿Sitio web o blog?\r\nPara cualquiera de las opciones puedes ir a File>New Project> Distill Website o Distill Blog\r\nVer otros detalles\r\nLa estructura del sitio contiene varios archivos\r\nLa configuraciÃ³n del sitio: site.yml\r\nLa primera pÃ¡gina que se abre cuando entras: index.Rmd\r\nOtros Rmd donde puedes escribir sobre tÃ­. Ej. about.Rmd\r\nBarra de navegaciÃ³n â›µ\r\nPara modificar la barra de navegaciÃ³n, abre el archivo site.yml  Puedes elegir donde quieres que aparezcan los contenidos. Ej. al elegir left aparecerÃ¡n a la izquierda.\r\nPara agregar pestaÃ±as agrega text y href. Pon atenciÃ³n a los espacios vacios. \r\n\r\nnavbar:\r\n  left: \r\n    - text: \"Home\"\r\n      href: index.html\r\n    - text: \"Projects\" \r\n      href: projects.html\r\n    - icon: fab fa-twitter\r\n      href: https://twitter.com/MiriamLermaL\r\n    - icon: fab fa-github\r\n      href: https://github.com/MiriamLL\r\n\r\nCrear un post ğŸ“¬\r\nUsa la funciÃ³n create_post y escribe dentro el nombre que quieras darle a tu post.\r\n\r\n\r\nlibrary(distill)\r\ncreate_post(\"Nombre de tu post\")\r\n\r\n\r\n\r\nAparecerÃ¡ algo como:\r\n\r\nv Created post at _posts/2021-05-14-Nombre de tu post\r\n\r\nY te abrirÃ¡ un nuevo Rmd.\r\nVer Uweâ€™s blog para otros detalles\r\nEscribir en el post âœï¸\r\nPuedes abrir el Rmd que creaste usando la funciÃ³n create_post y escribir como en cualquier Rmd.\r\nLa informaciÃ³n en el yaml aparecerÃ¡ en el indice de la pestaÃ±a.\r\n\r\n---\r\ntitle: \"sula\"\r\ndescription: |\r\n  A short description of the post.\r\nauthor:\r\n  - name: Miriam Lerma\r\n    url: {}\r\ndate: 05-14-2021\r\noutput:\r\n  distill::distill_article:\r\n    self_contained: false\r\n---\r\n\r\nAgregar cÃ³digo ğŸ‘©ğŸ½â€ğŸ’»\r\nPara agregar cÃ³digo en tu post y que no salga por otro lado el titulo, texto y cÃ³digo hay que tener espacios entre ellos.\r\n\r\n\r\nTitulo\r\n\r\nTexto\r\n\r\nChunk\r\n\r\n\r\n\r\nCSS ğŸ‘©ğŸ½â€ğŸ¨\r\nEn el paquete distill puedes usar la funciÃ³n create_theme, y poner el nombre que le quieres dar al archivo.\r\n\r\n\r\ncreate_theme(\"mi_estilo\")\r\n\r\n\r\n\r\nTe va a crear un archivo css que puedes modificar para cambiar el aspecto de tu pÃ¡gina. Una vez creado y/o modificado, debes incluirlo en site.yml.\r\n\r\n\r\noutput: \r\n  distill::distill_article:\r\n    theme: mi_estilo.css\r\n\r\n\r\n\r\nPuedes cambiar el estilo de las letras, y los colores. Ver mÃ¡s recursos de estilos.\r\nCitas ğŸŒ¹\r\nPara que aparezcan o no las citas, hay que abrir el site.yml y escribir:\r\n\r\n\r\ncollections:\r\n  posts:\r\n    citations: false\r\n\r\n\r\n\r\nAgregar botones ğŸ›ï¸\r\nSe pueden agregar botones en la pÃ¡gina para los enlaces. Para la inspiraciÃ³n y fuente ve al sitio de Ella Kaye\r\nPara agregar botones, empieza por instalar el paquete distilltools desde github.\r\n\r\n\r\n#remotes::install_github(\"EllaKaye/distilltools\")\r\nlibrary(distilltools)\r\n\r\n\r\n\r\nNota Si tienes algunos problemas con rlang, puedes intentar reiniciar sesiÃ³n y reinstalar el paquete rlang.\r\nPara agregar iconos usa la funciÃ³n icon_link\r\n\r\n\r\nicon_link(icon = \"fas fa-images\",\r\n          text = \"slides\",\r\n          url = \"https://miriamll.github.io/Tutorial_distill_es/TutorialPaginaDistill\")\r\n\r\n\r\n\r\nPara elegir el icono, entrar a la pagina fontawesome: (1) Elige el icono; (2) Busca la informaciÃ³n de html; (3) Copia lo que esta dentro de < y >.\r\nPara cambiar como se ven los botones, hay que especificarlo en el css. Por ejemplo:\r\n\r\n.icon-link {\r\n    background-color: transparent;\r\n    color: #D40067;\r\n    border: 1px solid;\r\n    border-color: #D40067;\r\n    padding: 5px .4rem 5px .4rem;\r\n    /*margin: 4px;*/\r\n    margin-top: 4px;\r\n    margin-right: 8px;\r\n    margin-bottom: 4px;\r\n    border-radius: 5px; /* Rounded edges */\r\n}\r\n\r\n.icon-link:hover {\r\n    background-color: #D40067;\r\n    border-color: #D40067;\r\n    color: white;\r\n}\r\n\r\nBuild ğŸ”¨\r\nEn la pestaÃ±a donde tienes environment, history o git, debe aparecer una nueva pestaÃ±a con el nombre de Build\r\nPuedes elegir esta pestaÃ±a, y darle click al martillo que dice Build Website para ver como quedo tu pÃ¡gina.\r\nEn la pestaÃ±a Viewerâ€¦ Ya puedes ver tu pagina distill ğŸ¥³.\r\nDe Rstudio a online ğŸ‘©ğŸ½â€ğŸš€\r\nUno de los retos es poner tu pagina online.\r\nSe pueden subir los archivos directamente a: Netlify\r\nSe pueden subir los archivos a github, y conectarlo con Netlify.Recomendado porque puedes estar actualizando los materiales desde RStudio.\r\nDe entrada, tu sitio sera tunombre.netlify.app. Si quieres que sea tunombre.com u otro, cuesta alrededor de 12 dolares, pero varia mucho.\r\nPublicar sitio por Lisa Lendway\r\nCrÃ©ditos y recursos ğŸš€\r\nTutoriales Crear articulo en distill Crear sitio (Re-)introducing Distill for R Markdown Ejemplos de paginas\r\nBlogs Galeria Paso a paso: crear un sitio por Lisa Lendway\r\nVideos RLadies Crear un sitio por Lisa Lendway\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-06-03-paginadistill/blog5.jpg",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-05-14-spheniscus/",
    "title": "spheniscus",
    "description": "Un paquete para limpiar datos de TDR y calcular parametros de buceo durante los viajes de alimentaciÃ³n.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-05-15",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nIntro\r\nInstalaciÃ³n\r\nDatos\r\nTDR_raw ğŸ“¥\r\nTDR_dives ğŸ¤¿\r\n\r\nFunciones\r\nextract_rawdata ğŸ§¹\r\nextract_trip âœ‚ï¸\r\nplot_depth ğŸ¨\r\ncorrect_zero ğŸ“\r\nidentify_dives ğŸŸ\r\ndive_parameters ğŸ§\r\n\r\nCitar\r\n\r\n\r\n\r\n\r\nIntro\r\nEl objetivo de este paquete es:\r\nHacer disponibles datos crudos de TDR para que se familiaricen con el formato.\r\nAyudarte a limpiar los datos de TDR para obtener parÃ¡metros de buceo de los animales muestreados.\r\n\r\n English\r\n\r\nInstalaciÃ³n\r\nEl paquete estarÃ¡ disponible solo por GitHub\r\n\r\n\r\ninstall.packages(\"devtools\")\r\ndevtools::install_github(\"MiriamLL/spheniscus\")\r\n\r\n\r\n\r\n\r\n\r\nlibrary(spheniscus)\r\n\r\n\r\n\r\nDatos\r\nTDR_raw ğŸ“¥\r\nAgrega los datos crudos como objeto.\r\n\r\n\r\nTDR_raw<-TDR_raw\r\n\r\n\r\n\r\nLas columnas no estÃ¡n separadas ya que primero hay que cortar partes del archivo. \r\nTDR_dives ğŸ¤¿\r\nIncluye todos los buceos durante el viaje. \r\n\r\n\r\nTDR_dives<-TDR_dives\r\n\r\n\r\n\r\nFunciones\r\nextract_rawdata ğŸ§¹\r\nExtrae la informaciÃ³n de profundidad de los datos crudos de los dispositivos.  En los dispositivos TDR (Cefas G5+) la presiÃ³n se empieza a medir despuÃ©s de â€˜Data Block 1â€™ y termina de medir presiÃ³n cuando empieza â€˜Data Block 2â€™. Estos nombres fueron usados como separadores en row_start y row_end. Si tu dispositivo usa otros separadores como por ejemplo â€˜Data Block 0â€™ hay que ajustar acorde.\r\n\r\n\r\nTDR_pressure<-extract_pressure(data=TDR_raw, \r\n                          row_start='Data Block 1', \r\n                          row_end = 'Data Block 2')\r\n\r\n\r\n\r\nextract_trip âœ‚ï¸\r\nCorta periodos de tiempo de acuerdo a nuestro interÃ©s.  La informaciÃ³n se obtuvo de dispositivos GPS, trip_start es cuando salieron de la colonia y trip_end cuando regresaron.\r\nLos datos fueron recortados para incluir sÃ³lo informaciÃ³n durante el viaje de alimentaciÃ³n.\r\n\r\n\r\nTDR_trip<-extract_trip(data=TDR_pressure,\r\n                   timeformat=\"%d-%m-%Y %H:%M:%S\",\r\n                   trip_start=\"30-11-2018 20:43:24\",\r\n                   trip_end=\"01-12-2018 20:16:19\")\r\n\r\n\r\n\r\nplot_depth ğŸ¨\r\nCrea un grafico con el perfil de buceos. Marca el cero con una linea roja.  El objetivo de este grÃ¡fico es que te permita decidir si debes corregir el cero.\r\n\r\n\r\nplot_depth(TDR_trip = TDR_trip,\r\n                   depth_column='Pressure',\r\n                   time_column='daytime')\r\n\r\n\r\n\r\n\r\ncorrect_zero ğŸ“\r\nEsta funciÃ³n te permite corregir el cero usando un factor de correcciÃ³n.  En el ejemplo, corregÃ­ el cero usando -0.80 m. Este valor fue ajustado de manera manual.\r\n\r\n\r\nTDR_corrected<-correct_zero(TDR_trip = TDR_trip,\r\n             depth_column='Pressure',\r\n             extra_correction=-0.80)\r\n\r\n\r\n\r\nPuedes volver a crear el grÃ¡fico para confirmar que se corrigiÃ³ el cero.\r\n\r\n\r\nplot_depth(TDR_trip = TDR_corrected,\r\n            depth_column='corrected_depth',\r\n            time_column='daytime')\r\n\r\n\r\n\r\n\r\nidentify_dives ğŸŸ\r\nEsta funciÃ³n identifica cada buceo como unidades individuales, y les asigna a cada inmersiÃ³n un numero, una profundidad media de buceo, una profundidad mÃ¡xima de buceo, una duraciÃ³n media de buceo y una duraciÃ³n mÃ¡xima de buceo.\r\nEn el ejemplo, los buceos reales fueron considerados cuando el animal se encontraba mÃ¡s profundo de 3 metros.\r\n\r\n\r\nTDR_dives<-identify_dives(TDR_corrected=TDR_corrected,\r\n               real_dives=3,\r\n               depth_column='corrected_depth')\r\n\r\n\r\n\r\ndive_parameters ğŸ§\r\nEsta funciÃ³n calcula los parÃ¡metros del viaje completo.\r\nIncluye:\r\n- promedio de la profundidad mÃ¡xima de buceo,\r\n- desviaciÃ³n estÃ¡ndar de la profundidad mÃ¡xima de buceo,\r\n- el mÃ¡ximo de profundidad, la duraciÃ³n promedio de los buceos,\r\n- la desviaciÃ³n estÃ¡ndar de la duraciÃ³n de los buceos, y\r\n- la duraciÃ³n mÃ¡xima de buceo, asÃ­ como\r\n- el total de buceos durante el viaje.Nota La profundidad de buceo se da en metros, la duraciÃ³n en segundos.\r\n\r\n\r\ndive_parameters<-calculate_diveparams(TDR_dives)\r\n\r\n\r\n\r\n\r\nmax_depth_mean\r\nmax_depth_sd\r\nmax_depth_max\r\ndive_duration_mean\r\ndive_duration_sd\r\ndive_duration_max\r\nn_dives\r\n11.7163\r\n4.836995\r\n39.21\r\n18.86549\r\n7.438373\r\n41\r\n565\r\n\r\nCitar\r\nEste script acompaÃ±a una publicaciÃ³n en pingÃ¼inos por Lerma et al.Â (en preparaciÃ³n)\r\nPara dar atribuciÃ³n:\r\nLerma, M (2021). Package spheniscus (Version v1.0). Zenodo. http://doi.org/10.5281/zenodo.4709837\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-05-14-spheniscus/spheniscus-logo.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {},
    "preview_width": 460,
    "preview_height": 464
  },
  {
    "path": "posts/2021-05-14-sula/",
    "title": "sula",
    "description": "Un paquete para editar datos de GPS y calcular parÃ¡metros de los viajes de alimentaciÃ³n.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-05-15",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nIntro\r\nInstalaciÃ³n ğŸ¤–\r\n\r\nDatos\r\nUn individuo ğŸ’ƒğŸ½\r\nMultiples individuos ğŸ‘¯â€\r\nNotas de campo âœï¸\r\n\r\nFunciones\r\najustar_hora ğŸ•\r\nrecortar_periodo âœ‚ï¸\r\nlocalizar_nido ğŸ£\r\nidentificar_viajesï¸ğŸ›©ï¸\r\ncontar_viajes ğŸ§®\r\ndist_colonia ğŸ“\r\ndist_puntos ğŸ“\r\ncalcular_duracion â³\r\ncalcular_totaldist ğŸ“\r\ncalcular_maxdist ğŸ“\r\ncalcular_tripparams ğŸ“â³ğŸ“\r\nrecortar_por_ID âœ‚ï¸âœ‚ï¸âœ‚ï¸\r\nlocalizar_nidos ğŸ£ğŸ£ğŸ£\r\npreparar_varios ğŸ”ŒğŸ”ŒğŸ”Œ\r\ntripparams_varios ğŸ“ğŸ“ğŸ“\r\n\r\nOtras herramientas\r\nInterpolar tus viajes ğŸ› ï¸\r\n\r\nCitar\r\n\r\n\r\n\r\n\r\nIntro\r\nEste paquete contiene:\r\nDatos de tracks de kena (Sula dactylatra) colectados en Rapa Nui para replicar los ejemplos ğŸ—¿\r\nTrece funciones para limpiar y calcular parÃ¡metros de viajes a partir de datos GPS\r\n\r\n English\r\n\r\nInstalaciÃ³n ğŸ¤–\r\nPuedes instalar este paquete desde GitHub usando:\r\n\r\n\r\n# install.packages(\"devtools\")\r\ndevtools::install_github(\"MiriamLL/sula\")\r\n\r\n\r\n\r\nDatos\r\nCarga la librerÃ­a\r\n\r\n\r\nlibrary(sula)\r\n\r\n\r\n\r\nUn individuo ğŸ’ƒğŸ½\r\nCarga los datos de GPS de un individuo.\r\n\r\n\r\nhead(GPS_01)\r\n\r\n\r\n\r\nNota Incluye columna con fecha y hora en formato POSIXct\r\nMultiples individuos ğŸ‘¯â€\r\nCarga los datos de GPS de diez individuos.\r\n\r\n\r\nhead(GPS_raw)\r\n\r\n\r\n\r\nNota Son datos en crudo por lo que las horas no estÃ¡n corregidas.\r\nNotas de campo âœï¸\r\nIncluye el periodo cuando se colocÃ³ el dispositivo hasta cuando se retirÃ³.\r\n\r\n\r\nNotas<-Notas\r\n\r\n\r\n\r\nNota: no corresponden al periodo real de muestreo. Se proveen estos datos para practicar las funciones.\r\nFunciones\r\najustar_hora ğŸ•\r\nEsta funciÃ³n corrige el tiempo de acuerdo a la zona horaria, se necesita especificar los datos GPS, el nombre de la columna que contiene datos de hora y dÃ­a, el formato en el que estÃ¡n Ã©stos datos, y el nÃºmero de horas de diferencia a corregir de acuerdo al GMT.\r\n\r\n\r\nGPS_gmt<-ajustar_hora(GPS_data = GPS_raw,\r\n                      dia_col = 'DateGMT',\r\n                      hora_col = 'TimeGMT',\r\n                      formato=\"%d/%m/%Y %H:%M:%S\",\r\n                      dif_hor = 5)\r\n\r\n\r\n\r\nRegresa el mismo data frame con dos columnas adicionales: dia_hora con el dÃ­a y fecha original y hora_corregida con la hora correspondiente al GMT.\r\nrecortar_periodo âœ‚ï¸\r\nEste funciÃ³n permite recortar periodos dentro de los datos.\r\n\r\n\r\nGPS_recortado<-recortar_periodo(GPS_data=GPS_01,\r\n                                inicio='02/11/2017 18:10:00',\r\n                                final='05/11/2017 14:10:00',\r\n                                dia_col='DateGMT',\r\n                                hora_col='TimeGMT',\r\n                                formato=\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\nNota: El formato de tiempo y hora debe ser el mismo formato que el formato de inicio y final.\r\nlocalizar_nido ğŸ£\r\nEsta funciÃ³n usa el primer valor de los datos de GPS como punto de la colonia, sirve para identificar la localizaciÃ³n del nido por individuo. Regresa un nuevo data frame con dos columnas: Latitude y Longitude correspondientes a la localizaciÃ³n del nido.\r\n\r\n\r\nnest_loc<-localizar_nido(GPS_data = GPS_01,\r\n                          lat_col=\"Latitude\",\r\n                          lon_col=\"Longitude\")\r\n\r\n\r\n\r\nNota Asume que los datos del nido corresponde al primer registro de GPS.\r\nidentificar_viajesï¸ğŸ›©ï¸\r\nEsta funciÃ³n agrega una columna de acuerdo a distancia de la colonia para determinar si esta en un viaje de alimentaciÃ³n o no.\r\n\r\n\r\nGPS_trip<-identificar_viajes(GPS_data=GPS_01,\r\n                        nest_loc=nest_loc,\r\n                        distancia_km=1)\r\n\r\n\r\n\r\nEn la columna llamada trip:N=dentro de la distancia considerada como no viaje de alimentaciÃ³n, yY=viaje de alimentaciÃ³n.\r\ncontar_viajes ğŸ§®\r\nEsta funciÃ³n agrega una columna con el nÃºmero del viaje y elimina locaciones dentro de el radio de la colonia.\r\n\r\n\r\nGPS_edited<-contar_viajes(GPS_data=GPS_trip)\r\n\r\n\r\n\r\ndist_colonia ğŸ“\r\nAgrega una columna con la distancia de la colonia de cada punto. Regresa el mismo data frame con una nueva columna llamada â€™maxdist_km.\r\n\r\n\r\nGPS_dist<-dist_colonia(GPS_edited = GPS_edited, \r\n                       nest_loc=nest_loc)\r\n\r\n\r\n\r\nNota usa CRS: 4326. Enlaces: Â¿referencia geogrÃ¡fica?, Â¿cual usar?\r\ndist_puntos ğŸ“\r\nAgrega una columna con la distancia entre cada punto. Regresa el mismo data frame con una nueva columna llamada â€˜pointsdist_kmâ€™.\r\n\r\n\r\nGPS_dist<-dist_puntos(GPS_data = GPS_edited,\r\n                      separador='trip_number')\r\n\r\n\r\n\r\nNota usa CRS: 4326. Incluye NAs al inicio del viaje. Enlaces: Â¿referencia geogrÃ¡fica?, Â¿cual usar?\r\ncalcular_duracion â³\r\nIdentifica el inicio y el final del viaje y calcula la duraciÃ³n. Regresa un nuevo data frame con 4 columnas: trip_id, trip_start, trip_end y duration.\r\n\r\n\r\nduracion<-calcular_duracion(GPS_data = GPS_edited,\r\n                            col_diahora = \"tStamp\",\r\n                            formato = \"%Y-%m-%d %H:%M:%S\",\r\n                            unidades=\"hours\",\r\n                            separador=\"trip_number\")\r\n\r\n\r\n\r\nNota la duraciÃ³n se calcula en valores nÃºmericos.\r\ncalcular_totaldist ğŸ“\r\nCalcula distancia recorrida de la colonia por viaje.\r\nDebe contener la columna Longitude y Latitude con estos nombres.\r\nRegresa un nuevo data frame con la distancia total recorrida por viaje.\r\n\r\n\r\ntotaldist_km<-calcular_totaldist(GPS_data= GPS_edited,\r\n                                 separador=\"trip_number\")\r\n\r\n\r\n\r\ncalcular_maxdist ğŸ“\r\nObtiene la distancia mÃ¡xima de la colonia por viaje.\r\nDebe contener la columna Longitude y Latitude con estos nombres.\r\nRegresa un nuevo data frame con la distancia mÃ¡xima de la colonia por viaje.\r\n\r\n\r\nmaxdist_km<-calcular_maxdist(GPS_data = GPS_edited, \r\n                             nest_loc=nest_loc,\r\n                             separador=\"trip_number\")\r\n\r\n\r\n\r\ncalcular_tripparams ğŸ“â³ğŸ“\r\nCalcula la duraciÃ³n de los viajes, la distancia mÃ¡xima de la colonia y la distancia total recorrida. Regresa un nuevo data frame con los parÃ¡metros por viaje.\r\n\r\n\r\ntrip_params<-calcular_tripparams(GPS_data = GPS_edited,\r\n                              diahora_col = \"tStamp\",\r\n                              formato = \"%Y-%m-%d %H:%M:%S\",\r\n                              nest_loc=nest_loc,\r\n                              separador=\"trip_number\")\r\n\r\n\r\n\r\nrecortar_por_ID âœ‚ï¸âœ‚ï¸âœ‚ï¸\r\nPuedes recortar periodos en los viajes.\r\nPara el ejemplo hay que tener dos data frames:\r\nUno con los datos de GPS incluyendo las columnas DateGMT,TimeGMT y IDs.\r\nSi no tienen estos nombres favor de renombrarlas.\r\nEl otro data frame son los datos de campo y deben incluir las columnas â€˜IDsâ€™, â€˜Hora_inicioâ€™ y â€˜Hora_finalâ€™.\r\nSi no tienen esos nombres favor de renombrarlas.\r\n\r\n\r\nGPS_recortados<-recortar_por_ID(GPS_data=GPS_raw,\r\n                                Notas=Notas,\r\n                                formato=\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\nlocalizar_nidos ğŸ£ğŸ£ğŸ£\r\nEsta funciÃ³n asume que los datos del nido corresponde al primer registro de GPS y regresa las coordenadas de los nidos para cada individuo.\r\n\r\n\r\nNidos_df<-localizar_nidos(GPS_data=GPS_raw,\r\n                         lon_col=\"Longitude\",\r\n                         lat_col=\"Latitude\",\r\n                         ID_col=\"IDs\")\r\n\r\n\r\n\r\npreparar_varios ğŸ”ŒğŸ”ŒğŸ”Œ\r\nEsta funciÃ³n sirve para preparar los datos antes de calcular parÃ¡metros por individuo.\r\nEn la funciÃ³n debes especificar: el nombre de tu data frame, el nombre de la columna de los ID (identificadores por individuo), el nombre de la columna de la longitud y el nombre de la columna de la latitud. Para elegir los viajes elige un buffer de fuera de la colonia (distancia_km). Elige tambiÃ©n tu sistema de referencia geogrÃ¡fica.\r\n\r\n\r\nGPS_preparado<-preparar_varios(GPS_data=GPS_raw,\r\n                               ID_col=\"IDs\",\r\n                               lon_col=\"Longitude\",\r\n                               lat_col=\"Latitude\",\r\n                               distancia_km=1,\r\n                               sistema_ref=\"+init=epsg:4326\")\r\n\r\n\r\n\r\nNota que al usar esta funciÃ³n aparecerÃ¡n warnings. Estos warnings advierten sobre la transformaciÃ³n del objeto espacial.\r\nEnlaces: Â¿referencia geogrÃ¡fica?, Â¿cual usar?\r\ntripparams_varios ğŸ“ğŸ“ğŸ“\r\nPara calcular parÃ¡metros de viajes de varios individuos especifica el nombre de la columna que contiene los identificadores por individuo, el nombre de la columna que contiene informaciÃ³n nÃºmero del viaje y el nombre de la columna que contiene informaciÃ³n del dÃ­a y hora en formato POSTIXct.\r\nNota para usar esta funciÃ³n tus datos deben tener una columna dÃ­a y hora, si no es asÃ­, puedes hacerlo de manera manual o usar la funciÃ³n ajustar_hora de este paquete y poner 0 en la diferencia horaria.\r\n\r\n\r\nGPS_preparado<-ajustar_hora(GPS_data = GPS_preparado,\r\n                            dif_hor = 0,\r\n                            dia_col = 'DateGMT',\r\n                            hora_col = 'TimeGMT',\r\n                            formato=\"%d/%m/%Y %H:%M:%S\")\r\n\r\n\r\n\r\n\r\n\r\ntrip_params<-tripparams_varios(GPS_data=GPS_preparado,\r\n                               col_ID = \"IDs\",\r\n                               col_diahora=\"hora_corregida\",\r\n                               separador=\"trip_number\")\r\n\r\n\r\n\r\nOtras herramientas\r\nInterpolar tus viajes ğŸ› ï¸\r\nSi tienes intervalos disparejos, y necesitas interpolar tus datos puedes establecer un intervalo Tu data frame debe contener las columnas Longitud, Latitud, ID, numero de viaje, y hora y dia en formato POSTIXct\r\n\r\n\r\nGPS_interpolated<-interpolar_viajes(GPS_preparado=GPS_preparado, \r\n                                    intervalo=\"900 sec\", \r\n                                    col_diahora=\"dia_hora\", \r\n                                    separador='trip_number',\r\n                                    col_ID='IDs')\r\n\r\n\r\n\r\nCitar\r\nLerma M (2021) Package sula. Zenodo. ttps://doi.org/10.5281/zenodo.4740920\r\nLos datos de prueba vienen de la publicaciÃ³n: Lerma M, Dehnhard N, Luna-Jorquera G, Voigt CC, Garthe S (2020) Breeding stage, not sex, affects foraging characteristics in masked boobies at Rapa Nui. Behavioral ecology and sociobiology 74: 149. ğŸ”“\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-05-14-sula/sula-logo.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {},
    "preview_width": 454,
    "preview_height": 464
  },
  {
    "path": "posts/2021-04-28-otros/",
    "title": "Talleres diversos",
    "description": "Como crear tus propios paquetes, o como crear tu pagina web.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-04-28",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nIntro\r\n\r\nIntro\r\nHay varias maneras de aprender, aqui te muestro el formato de blog, donde puedes ver detalles en el texto, pero si estas en celular, que es frecuentemente mi caso, lo que hago es que\r\nTaller para crear tus propios paquetes.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "https://raw.githubusercontent.com/MiriamLL/Desarrollo_paquetes/main/Figuras/Portada1.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-29-rmd/",
    "title": "Clase de Rmd",
    "description": "Desde como crear documentos en Rmd hasta como compartirlos.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-03-16",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nRmarkdown\r\nRmarkdown.\r\nRmarkdown para escribir artÃ­culos\r\nPresentar tus resultados usando Xaringan.\r\nEstilizar tus dispositivas Xaringan.\r\nGithub, Zenodo y Git.\r\nReproducibilidad.\r\n\r\n\r\n\r\n\r\n\r\nRmarkdown\r\nBienvenido!\r\nEste material fue preparado para tÃ©cnicos y estudiantes de posgrado del Centro de InvestigaciÃ³n de AlimentaciÃ³n y Desarrollo CIAD.\r\nNo obstante, espero sea de ayuda para cualquiera que tenga intenciones de aprender R.\r\nIrÃ© subiendo materiales conforme se vayan actualizando.\r\nRmarkdown.\r\nEn esta clase aprenderÃ¡s como crear documentos en Rmd. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nRmarkdown para escribir artÃ­culos\r\nEn esta clase aprenderÃ¡s como agregar citas y formato de revista. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nPresentar tus resultados usando Xaringan.\r\nEn esta clase aprenderÃ¡s como crear presentaciones en Xaringan. PodrÃ¡s incluir tablas y figuras sin salir de RStudio. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nEstilizar tus dispositivas Xaringan.\r\nEn esta clase aprenderÃ¡s como cambiar el estilo de letras o colores de tus presentaciones en Xaringan. TambiÃ©n aprenderÃ¡s como compartirlas ya sea en github o en pdf. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nGithub, Zenodo y Git.\r\nEn esta clase aprenderÃ¡s como crear un repositorio en github, como utilizar Zenodo para darle un DOI a nuestros materiales y los bÃ¡sicos de Git. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nReproducibilidad.\r\nEn esta clase verÃ¡s bÃ¡sicos de reproducibilidad en la ciencia y en las publicaciones. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Clase09.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-16-biologging/",
    "title": "Biologging",
    "description": "Desde como descargar tus datos de GPS, como cortar partes de interÃ©s, hasta hacer tus primeros grÃ¡ficos con datos de tracking y exportarlos.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-02-16",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nBiologging\r\nDescargar tus datos.\r\nCorregir horas.\r\nEditar GPS.\r\n\r\n\r\nBiologging\r\nBienvenido!\r\nEste material fue preparado para estudiantes de posgrado de la Universidad de Guadalajara.\r\nNo obstante, espero sea de ayuda para cualquiera que tenga intenciones de aprender como manejar sus datos de GPS en R.\r\nIrÃ© subiendo materiales conforme se vayan actualizando.\r\nDescargar tus datos.\r\nEn esta clase aprenderÃ¡s a descargar tus datos de GPS, unirlos y realizar tus primeras grÃ¡ficas. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nCorregir horas.\r\nEn esta clase aprenderÃ¡s a corregir la hora en tus datos de GPS de acuerdo a tu GMT. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nEditar GPS.\r\nEn esta clase aprenderÃ¡s a cortar periodos de tiempo de tus datos GPS. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "https://raw.githubusercontent.com/MiriamLL/Curso_tracking/main/03Figuras/CortarDatosGPS.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-01-IntroaR/",
    "title": "Clase R desde cero",
    "description": "Desde como abrir R y RStudio hasta como exportar tus grÃ¡ficos, la idea es que este curso te haga sentir cÃ³modo trabajando tus datos y anÃ¡lisis en R.",
    "author": [
      {
        "name": "Miriam Lerma",
        "url": {}
      }
    ],
    "date": "2021-01-28",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nClase de R\r\nIntro a R.\r\nCargar tus datos.\r\nGrÃ¡ficos.\r\nOperaciones.\r\nOrdenar, unir y exportar.\r\nProyectos.\r\nModelo lineal simple.\r\nAnalisis de varianzas.\r\nModelos mixtos.\r\n\r\n\r\n\r\n\r\n\r\nClase de R\r\nBienvenido!\r\nEste material fue preparado para tÃ©cnicos y estudiantes de posgrado del Centro de InvestigaciÃ³n de AlimentaciÃ³n y Desarrollo CIAD.\r\nNo obstante, espero sea de ayuda para cualquiera que tenga intenciones de aprender R.\r\nIrÃ© subiendo materiales conforme se vayan actualizando.\r\nIntro a R.\r\nEn esta clase aprenderÃ¡s a abrir RStudio e identificar sus partes. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nCargar tus datos.\r\nEn esta clase aprenderÃ¡s a como cargar paquetes, seleccionar tu directorio y cargar tus datos en R. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nGrÃ¡ficos.\r\nEn esta clase aprenderÃ¡s como funciona ggplot2 y como crear tus propios grÃ¡ficos.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nOperaciones.\r\nEn esta clase aprenderÃ¡s algunas funciones bÃ¡sicas para realizar operaciones matemÃ¡ticas en R y como moverte entre tus columnas y filas. \r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nOrdenar, unir y exportar.\r\nEn esta clase aprenderÃ¡s algunas funciones de tidyverse para poder ordenar tus columnas, limpiar tus datos, unir diferentes archivos y exportar tus nuevos data frames.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nProyectos.\r\nEn esta clase aprenderÃ¡s porque es importante trabajar por proyectos, como crear y compartir un proyecto.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nModelo lineal simple.\r\nEn esta clase aprenderÃ¡s como explorar tus datos, cuales son los argumentos para un modelo lineal simple en R y como agregar la linea de ajuste a tu grÃ¡fico.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nAnalisis de varianzas.\r\nEn esta clase aprenderÃ¡s como convertir a factor, cuales son los argumentos para un anÃ¡lisis de varianza en R y como crear grÃ¡ficos para visualizar tus resultados del anÃ¡lisis.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\nModelos mixtos.\r\nEsta clase es una introducciÃ³n a los modelos mixtos y a la selecciÃ³n de modelos usando el AIC.\r\n\r\n PresentaciÃ³n Descargar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Clase1.png",
    "last_modified": "2022-03-22T10:53:03+01:00",
    "input_file": {}
  }
]
